---
title: Разделение состояний и изоляция
description: Разделение состояний и изоляция
author: jbennett
ms.date: 6/30/2020
ms.topic: article
keywords: безопасность, hololens, разделение состояний, разделение состояний и изоляция, hololens 2, безопасность hololens2, обзор безопасности, архитектура безопасности, архитектура, архитектура hololens 2
ms.prod: hololens
ms.sitesec: library
ms.localizationpriority: high
ms.reviewer: ''
manager: yannisl
appliesto:
- HoloLens 2
ms.openlocfilehash: e92e2fcbc13ad5c9e5748b1d619e387ae9a4d147
ms.sourcegitcommit: 896bdfccf4612a692a25a6bfaecfa2146860407e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2020
ms.locfileid: "10865882"
---
# Разделение состояний и изоляция

Разделение состояний и изоляция — эти защитные механизмы предохраняют от изменений важнейшие части операционной системы Hololens 2, в том числе необходимые для загрузки в надежное состояние. Технология изоляции позволяет переместить ненадежные приложения в изолированную среду песочницы, чтобы они не могли повлиять на безопасность системы.

## Разделение состояний

Разделение состояний в HoloLens 2 значительно повышает уровень безопасности и удобства обслуживания (обновления), а также помогает защитить данные приложений.  Разделение состояний работает следующим образом.
  * Основная операционная система хранится в томе основной операционной системы (доверенная или проверенная обновляемая ОС Майкрософт).
  * Фрагменты операционной системы, которые могут быть изменены во время выполнения (например, загружаемые драйверы и конфигурации), используют дальнейшее разделение состояний, чтобы отделить данные и хранить их в изолированных безопасных расположениях.
  * С каждым защищенным расположением хранения связаны определенные политики безопасности. За счет этого обеспечиваются различные преимущества безопасности, подробно описанные в следующем разделе.

## Преимущества разделения состояний

  * Безопасность: разделение состояний, реализованное в HoloLens 2, значительно повышает целостность платформы и устойчивость к вредоносным программам, а также повышает надежность защиты пользовательских данных. При разделении состояний неизменяемая часть операционной системы отделяется и становится доступной только для чтения или защищается средствами поддержания целостности данных, поэтому при "холодной" перезагрузке у вредоносных программ практически нет возможности сохраниться. 
  * Обновления: поскольку в HoloLens 2 основная операционная система неизменяемая и четко отделена от остальных данных устройства, обновления устроены очень просто и надежно.  Кроме того, разделение состояний позволяет гораздо быстрее устанавливать обновления: можно заменять операционную систему за один шаг.
  * Сброс устройства: при сбросе HoloLens 2 очищаются пользовательские данные и данные пользовательских приложений на этом устройстве, включая внутреннее и внешнее хранилища. При этом сохраняются текущие приложения ОС и важные приложения безопасности, а также текущие приложения Майкрософт и настроенные OEM-приложения (предустановленные). Эти предустановленные приложения могут быть восстановлены на устройстве после завершения сброса.

### Разделяемые состояния

За счет разделения состояний операционная система может быть изменена только доверенными компонентами устройства Майкрософт. При перезагрузке допускается сохранение только важных данных. Остальные системные данные и параметры существуют лишь в течение одного сеанса загрузки и удаляются при перезагрузке. За счет разделения состояний устройство быстро возвращается в фабричное состояние. Состояния Windows Holographic для бизнеса разделяются на следующие категории:
  * Основная операционная система — неизменяемое состояние
  * Основная операционная система — изменяемое состояние 
  * Пользовательские данные — изменяемое состояние

Каждое из этих состояний HoloLens 2 описывается в следующем разделе.

#### Основная операционная система

Неизменяемое состояние состоит из неизменяемых исполняемых файлов и данных; эти файлы и данные могут быть изменены только корпорацией Майкрософт при установке обновлений. В ходе такого обновления основной операционной системы включается новый образ, содержащий последнее желаемое операционное состояние.
Неизменяемое состояние отмечается как доступное только для чтения (или защищается иным образом), что исключает сохранение вредоносных программ с расширенными правами. В неизменяемом состоянии защищены следующие исполняемые файлы и данные:
  * Встроенные драйверы Windows Holographic
  * Двоичные файлы операционной системы
  * Встроенные драйверы Windows
  * Статические параметры Windows Holographic, хранящиеся в реестре Windows (HKLM)
    * Пример: в HKLM хранятся сведения о конфигурации приложений, установленных на компьютере. Также хранится информация для обнаружения оборудования и соответствующих драйверов.
Сохраняя этих данные в неизменяемом состоянии (защита целостности данных и доступ только для чтения), мы гарантируем загрузку основной операционной системы только в доверенном состоянии. Кроме того, при сбросе устройства загружаются только компоненты, находящиеся в неизменяемом разделе. 

#### Данные операционной системы 

Важно отметить что исполняемые файлы и данные, изменяемые во время выполнения (и не являющиеся важными для работы ОС), могут быть удалены и заново созданы в случае повреждения или компрометации. Важные изменяемые данные либо должны быть сохранены операционной системой по соображениям функциональности, либо должны сохраняться после завершения работы операционной системы, а также в ходе перезагрузок в сценариях, поддерживаемых операционной системой Windows и устройством. Примеры важного изменяемого состояния:
  * Настроенные ИТ-администраторами глобальные параметры устройств, например отключение данных расположения для всех пользователей.
  * Данные для подключения к сетям Wi-Fi: сохраненные на устройстве сети и связанные с ними пароли.
  * Аварийные дампы, в том числе параметры и журналы.
  * Драйверы, загруженные по запросу для новых устройств.
Важные изменяемые данные в HoloLens 2 хранятся в защищенном расположении операционной системы либо в виде файла на диске, либо в сохраняемом кусте реестра.

#### Пользовательские данные

Последняя категория представляет собой пользовательские данные, созданные или сохраненные приложениями UWP или операционной системой. В этом расположении хранятся все известные пользовательские папки, такие как "Загрузки", "Документы", "Видео", профили пользователей и куст реестра HKEY_CURRENT_USER. Эти данные невозможно извлечь без соответствующих учетных данных. Дополнительные сведения о защите данных см. в статье [Шифрование и защита данных](security-encryption-data-protection.md).

##  Изоляция

Для достижения такого результата основная операционная система HoloLens 2 используется для основных функций: загрузка, управление оборудованием, ведение журналов и т. д. В основной операционной системы выполняются лишь два набора приложений: предустановленные приложения и приложения UWP.

## Подписание кода

Цифровые подписи кода позволяют удостовериться, что исполняемые файлы и сценарии не были изменены после подписания надежным источником, за счет чего обеспечивается их подлинность и целостность. Надежными источниками для HoloLens 2 по умолчанию являются: корпорация Майкрософт и Microsoft. ИТ-администраторы могут добавлять новые сертификаты на устройство с помощью политик [ClientCertificateInstall](https://docs.microsoft.com/windows/client-management/mdm/clientcertificateinstall-csp) и [RootCATrustedCertificates](https://docs.microsoft.com/windows/client-management/mdm/rootcacertificates-csp). Кроме того, с помощью политики [AllowAllTrustedApps](https://docs.microsoft.com/windows/client-management/mdm/policy-csp-applicationmanagement#applicationmanagement-allowalltrustedapps) можно включить дополнительные загруженные приложения или [бизнес-приложения](https://docs.microsoft.com/intune/apps/lob-apps-windows) в число надежных. Сертификаты сохраняются в хранилище сертификатов локального компьютера в кусте реестра HKLM/Root (если используется "Устройство") или HKCU (если используется "Пользователь").

## Защитник Windows
В HoloLens 2 для дополнительной безопасности применяются службы Майкрософт:

* [Фильтр SmartScreen Защитника Windows](https://docs.microsoft.com/windows/security/threat-protection/microsoft-defender-smartscreen/microsoft-defender-smartscreen-overview) автоматически включается операционной системой в Windows Holographic и защищает от фишинга и вредоносных программ, а также от загрузки потенциально вредоносных файлов в Edge. Эта функция не может быть выключена пользователем, но может быть отключена политикой.

* [Брандмауэр Защитника Windows](https://docs.microsoft.com/windows/security/threat-protection/windows-firewall/windows-firewall-with-advanced-security) блокирует несанкционированный входящий и исходящий сетевой трафик вашего устройства. Он включен по умолчанию и не может быть настроен клиентами путем локальных действий или с помощью политики. 

* [Управление приложениями в Защитнике Windows](https://docs.microsoft.com/windows/security/threat-protection/windows-defender-application-control/wdac-and-applocker-overview): HoloLens 2 поддерживает WDAC, благодаря чему ИД-администраторы могут применять к устройству политики управления приложениями. Дополнительные сведения см. в статье [Использование WDAC для устройств HoloLens 2 с помощью Microsoft Intune](https://docs.microsoft.com/mem/intune/configuration/custom-profile-hololens). 

ИТ-администраторы могут управлять поведением SmartScreen с помощью политики [AllowSmartScreen](https://docs.microsoft.com/windows/client-management/mdm/policy-csp-browser#browser-allowsmartscreen), а для управления поведением браузера можно использовать [эти политики](https://docs.microsoft.com/windows/client-management/mdm/policy-csps-supported-by-hololens2). 

