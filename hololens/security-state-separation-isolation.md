---
title: Разделение состояний и изоляция
description: Разделение состояний и изоляция
author: evmill
ms.author: v-evmill
ms.reviewer: tagran
ms.date: 6/30/2020
ms.topic: article
keywords: безопасность, hololens, разделение состояний, разделение состояний и изоляция, hololens 2, безопасность hololens2, обзор безопасности, архитектура безопасности, архитектура, архитектура hololens 2
ms.prod: hololens
ms.sitesec: library
ms.localizationpriority: high
manager: yannisle
appliesto:
- HoloLens 2
ms.openlocfilehash: 702b713b7a930a2e4909dffaa895856d918d11c9
ms.sourcegitcommit: 72ff3174b34d2acaf72547b7d981c66aef8fa82f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/10/2020
ms.locfileid: "11009417"
---
# <span data-ttu-id="f22e1-104">Разделение состояний и изоляция</span><span class="sxs-lookup"><span data-stu-id="f22e1-104">State separation and isolation</span></span>

<span data-ttu-id="f22e1-105">Разделение состояний и изоляция — эти защитные механизмы предохраняют от изменений важнейшие части операционной системы Hololens 2, в том числе необходимые для загрузки в надежное состояние.</span><span class="sxs-lookup"><span data-stu-id="f22e1-105">State separation and isolation protects critical portions of the Hololens 2 operating system from change – such as those required for the operating system to boot into a trusted state.</span></span> <span data-ttu-id="f22e1-106">Технология изоляции позволяет переместить ненадежные приложения в изолированную среду песочницы, чтобы они не могли повлиять на безопасность системы.</span><span class="sxs-lookup"><span data-stu-id="f22e1-106">With isolation technology, untrusted apps are moved to an isolated sandbox environment, to ensure that they do not affect system security.</span></span>

## <span data-ttu-id="f22e1-107">Разделение состояний</span><span class="sxs-lookup"><span data-stu-id="f22e1-107">State separation</span></span>

<span data-ttu-id="f22e1-108">Разделение состояний в HoloLens 2 значительно повышает уровень безопасности и удобства обслуживания (обновления), а также помогает защитить данные приложений.</span><span class="sxs-lookup"><span data-stu-id="f22e1-108">State separation on HoloLens 2 vastly improves security and serviceability (updating) and helps protect your application data.</span></span>  <span data-ttu-id="f22e1-109">Разделение состояний работает следующим образом.</span><span class="sxs-lookup"><span data-stu-id="f22e1-109">State separation works as follows:</span></span>
  * <span data-ttu-id="f22e1-110">Основная операционная система хранится в томе основной операционной системы (доверенная или проверенная обновляемая ОС Майкрософт).</span><span class="sxs-lookup"><span data-stu-id="f22e1-110">The core operating system is stored in the core operating system volume (trusted or verified Microsoft OS updating the operating system).</span></span>
  * <span data-ttu-id="f22e1-111">Фрагменты операционной системы, которые могут быть изменены во время выполнения (например, загружаемые драйверы и конфигурации), используют дальнейшее разделение состояний, чтобы отделить данные и хранить их в изолированных безопасных расположениях.</span><span class="sxs-lookup"><span data-stu-id="f22e1-111">The portions of the operating system that can be changed at run time (such as downloadable drivers and configurations), use further state separation to partition the data, and to store it in secure, separate storage locations.</span></span>
  * <span data-ttu-id="f22e1-112">С каждым защищенным расположением хранения связаны определенные политики безопасности. За счет этого обеспечиваются различные преимущества безопасности, подробно описанные в следующем разделе.</span><span class="sxs-lookup"><span data-stu-id="f22e1-112">Each secure storage location has distinct security policies associated with it, offering varied security advantages as detailed in the following section.</span></span>

## <span data-ttu-id="f22e1-113">Преимущества разделения состояний</span><span class="sxs-lookup"><span data-stu-id="f22e1-113">State separation benefits</span></span>

  * <span data-ttu-id="f22e1-114">Безопасность: разделение состояний, реализованное в HoloLens 2, значительно повышает целостность платформы и устойчивость к вредоносным программам, а также повышает надежность защиты пользовательских данных.</span><span class="sxs-lookup"><span data-stu-id="f22e1-114">Security: The state separation featured in HoloLens 2 significantly improves platform integrity, malware resistance and user data protection.</span></span> <span data-ttu-id="f22e1-115">При разделении состояний неизменяемая часть операционной системы отделяется и становится доступной только для чтения или защищается средствами поддержания целостности данных, поэтому при "холодной" перезагрузке у вредоносных программ практически нет возможности сохраниться.</span><span class="sxs-lookup"><span data-stu-id="f22e1-115">By separating the unalterable part of the operating system and making it read-only or integrity protected, state separation makes it extremely difficult for malware to persist across a cold reboot.</span></span> 
  * <span data-ttu-id="f22e1-116">Обновления: поскольку в HoloLens 2 основная операционная система неизменяемая и четко отделена от остальных данных устройства, обновления устроены очень просто и надежно.</span><span class="sxs-lookup"><span data-stu-id="f22e1-116">Updates: With HoloLens 2, once the core operating system is unmodifiable and has been cleanly separated from the rest of the data on the device, updates become simple and reliable.</span></span>  <span data-ttu-id="f22e1-117">Кроме того, разделение состояний позволяет гораздо быстрее устанавливать обновления: можно заменять операционную систему за один шаг.</span><span class="sxs-lookup"><span data-stu-id="f22e1-117">In addition, state separation lays the vital groundwork for dramatically faster updates, which permits the operating system to be replaced in a single step (atomic unit).</span></span>
  * <span data-ttu-id="f22e1-118">Сброс устройства: при сбросе HoloLens 2 очищаются пользовательские данные и данные пользовательских приложений на этом устройстве, включая внутреннее и внешнее хранилища.</span><span class="sxs-lookup"><span data-stu-id="f22e1-118">Device reset: HoloLens 2 reset clears user generated data and user app data on the device – including internal and external storage locations.</span></span> <span data-ttu-id="f22e1-119">При этом сохраняются текущие приложения ОС и важные приложения безопасности, а также текущие приложения Майкрософт и настроенные OEM-приложения (предустановленные).</span><span class="sxs-lookup"><span data-stu-id="f22e1-119">It preserves the current OS apps and security critical apps, and the current Microsoft and OEM customized apps (Preinstalled).</span></span> <span data-ttu-id="f22e1-120">Эти предустановленные приложения могут быть восстановлены на устройстве после завершения сброса.</span><span class="sxs-lookup"><span data-stu-id="f22e1-120">These Preinstalled apps can be rehydrated on the device after reset completes</span></span>

### <span data-ttu-id="f22e1-121">Разделяемые состояния</span><span class="sxs-lookup"><span data-stu-id="f22e1-121">State separation states</span></span>

<span data-ttu-id="f22e1-122">За счет разделения состояний операционная система может быть изменена только доверенными компонентами устройства Майкрософт. При перезагрузке допускается сохранение только важных данных. Остальные системные данные и параметры существуют лишь в течение одного сеанса загрузки и удаляются при перезагрузке.</span><span class="sxs-lookup"><span data-stu-id="f22e1-122">State separation ensures the operating system can only be changed by Microsoft trusted device components and only high-value state is allowed to persist across reboots; other system state exists only for the duration of the boot session and is discarded after a reboot.</span></span> <span data-ttu-id="f22e1-123">За счет разделения состояний устройство быстро возвращается в фабричное состояние.</span><span class="sxs-lookup"><span data-stu-id="f22e1-123">Having state separation rapidly returns the device back to factory state.</span></span> <span data-ttu-id="f22e1-124">Состояния Windows Holographic для бизнеса разделяются на следующие категории:</span><span class="sxs-lookup"><span data-stu-id="f22e1-124">Windows Holographic for Business states can be divided into these distinct categories:</span></span>
  * <span data-ttu-id="f22e1-125">Основная операционная система — неизменяемое состояние</span><span class="sxs-lookup"><span data-stu-id="f22e1-125">Core operating system – Unalterable state</span></span>
  * <span data-ttu-id="f22e1-126">Основная операционная система — изменяемое состояние</span><span class="sxs-lookup"><span data-stu-id="f22e1-126">Operating System Data – Alterable state</span></span> 
  * <span data-ttu-id="f22e1-127">Пользовательские данные — изменяемое состояние</span><span class="sxs-lookup"><span data-stu-id="f22e1-127">User Data – Alterable state</span></span>

<span data-ttu-id="f22e1-128">Каждое из этих состояний HoloLens 2 описывается в следующем разделе.</span><span class="sxs-lookup"><span data-stu-id="f22e1-128">Each of these HoloLens 2 operating states is described in the following section.</span></span>

#### <span data-ttu-id="f22e1-129">Основная операционная система</span><span class="sxs-lookup"><span data-stu-id="f22e1-129">Core operating system</span></span>

<span data-ttu-id="f22e1-130">Неизменяемое состояние состоит из неизменяемых исполняемых файлов и данных; эти файлы и данные могут быть изменены только корпорацией Майкрософт при установке обновлений.</span><span class="sxs-lookup"><span data-stu-id="f22e1-130">An immutable state is comprised of executable files and data that are unalterable and can only be changed by Microsoft during the installation of updates.</span></span> <span data-ttu-id="f22e1-131">В ходе такого обновления основной операционной системы включается новый образ, содержащий последнее желаемое операционное состояние.</span><span class="sxs-lookup"><span data-stu-id="f22e1-131">During such an update of the core operating system, a new image containing the latest desired operating state is enabled.</span></span>
<span data-ttu-id="f22e1-132">Неизменяемое состояние отмечается как доступное только для чтения (или защищается иным образом), что исключает сохранение вредоносных программ с расширенными правами.</span><span class="sxs-lookup"><span data-stu-id="f22e1-132">The unalterable state is marked as read-only (or is otherwise integrity-protected), preventing persistence of any malware with elevated privileges.</span></span> <span data-ttu-id="f22e1-133">В неизменяемом состоянии защищены следующие исполняемые файлы и данные:</span><span class="sxs-lookup"><span data-stu-id="f22e1-133">The following executable files and data are protected in the immutable state:</span></span>
  * <span data-ttu-id="f22e1-134">Встроенные драйверы Windows Holographic</span><span class="sxs-lookup"><span data-stu-id="f22e1-134">Windows Holographic inbox drivers</span></span>
  * <span data-ttu-id="f22e1-135">Двоичные файлы операционной системы</span><span class="sxs-lookup"><span data-stu-id="f22e1-135">Operating system binaries</span></span>
  * <span data-ttu-id="f22e1-136">Встроенные драйверы Windows</span><span class="sxs-lookup"><span data-stu-id="f22e1-136">Windows inbox drivers</span></span>
  * <span data-ttu-id="f22e1-137">Статические параметры Windows Holographic, хранящиеся в реестре Windows (HKLM)</span><span class="sxs-lookup"><span data-stu-id="f22e1-137">Static Windows Holographic settings stored in Windows registry hive (HKLM)</span></span>
    * <span data-ttu-id="f22e1-138">Пример: в HKLM хранятся сведения о конфигурации приложений, установленных на компьютере.</span><span class="sxs-lookup"><span data-stu-id="f22e1-138">Example: HKLM stores the configuration information for the apps installed on a machine.</span></span> <span data-ttu-id="f22e1-139">Также хранится информация для обнаружения оборудования и соответствующих драйверов.</span><span class="sxs-lookup"><span data-stu-id="f22e1-139">It also stores information to detect hardware and the corresponding drivers.</span></span>
<span data-ttu-id="f22e1-140">Сохраняя этих данные в неизменяемом состоянии (защита целостности данных и доступ только для чтения), мы гарантируем загрузку основной операционной системы только в доверенном состоянии.</span><span class="sxs-lookup"><span data-stu-id="f22e1-140">By protecting these in the immutable (integrity and read-only protected) state, we ensure that the core operating system always boots into a trusted state.</span></span> <span data-ttu-id="f22e1-141">Кроме того, при сбросе устройства загружаются только компоненты, находящиеся в неизменяемом разделе.</span><span class="sxs-lookup"><span data-stu-id="f22e1-141">Additionally, when a device is reset, we can ensure that the device boots only into the components that are on this immutable section.</span></span> 

#### <span data-ttu-id="f22e1-142">Данные операционной системы</span><span class="sxs-lookup"><span data-stu-id="f22e1-142">Operating system data</span></span> 

<span data-ttu-id="f22e1-143">Важно отметить что исполняемые файлы и данные, изменяемые во время выполнения (и не являющиеся важными для работы ОС), могут быть удалены и заново созданы в случае повреждения или компрометации.</span><span class="sxs-lookup"><span data-stu-id="f22e1-143">It is important to note that executable files and data that are changeable at runtime (and are not critical to the operating system function), can be discarded and re-created when the data is corrupted or compromised.</span></span> <span data-ttu-id="f22e1-144">Важные изменяемые данные либо должны быть сохранены операционной системой по соображениям функциональности, либо должны сохраняться после завершения работы операционной системы, а также в ходе перезагрузок в сценариях, поддерживаемых операционной системой Windows и устройством.</span><span class="sxs-lookup"><span data-stu-id="f22e1-144">A high-value alterable state is either functionally required to persist by the operating system, or expected to persist across operating system shutdown, and/or across reboots by supported Windows operating system and device scenarios.</span></span> <span data-ttu-id="f22e1-145">Примеры важного изменяемого состояния:</span><span class="sxs-lookup"><span data-stu-id="f22e1-145">Examples of high-value mutable state are:</span></span>
  * <span data-ttu-id="f22e1-146">Настроенные ИТ-администраторами глобальные параметры устройств, например отключение данных расположения для всех пользователей.</span><span class="sxs-lookup"><span data-stu-id="f22e1-146">IT Admin-configured global device settings, such as disabling the location for all users.</span></span>
  * <span data-ttu-id="f22e1-147">Данные для подключения к сетям Wi-Fi: сохраненные на устройстве сети и связанные с ними пароли.</span><span class="sxs-lookup"><span data-stu-id="f22e1-147">Wi-fi network connection access data-device-remembered networks and associated connection passwords.</span></span>
  * <span data-ttu-id="f22e1-148">Аварийные дампы, в том числе параметры и журналы.</span><span class="sxs-lookup"><span data-stu-id="f22e1-148">Crash dumps including settings, logs.</span></span>
  * <span data-ttu-id="f22e1-149">Драйверы, загруженные по запросу для новых устройств.</span><span class="sxs-lookup"><span data-stu-id="f22e1-149">Drivers downloaded on-demand for newly discovered devices.</span></span>
<span data-ttu-id="f22e1-150">Важные изменяемые данные в HoloLens 2 хранятся в защищенном расположении операционной системы либо в виде файла на диске, либо в сохраняемом кусте реестра.</span><span class="sxs-lookup"><span data-stu-id="f22e1-150">A high-value alterable state on HoloLens 2 resides on the operating system Data security location, either as a saved file on disk or in a persisted registry hive.</span></span>

#### <span data-ttu-id="f22e1-151">Пользовательские данные</span><span class="sxs-lookup"><span data-stu-id="f22e1-151">User data</span></span>

<span data-ttu-id="f22e1-152">Последняя категория представляет собой пользовательские данные, созданные или сохраненные приложениями UWP или операционной системой.</span><span class="sxs-lookup"><span data-stu-id="f22e1-152">The last category of state represents user data produced or persisted by UWP applications or the operating system.</span></span> <span data-ttu-id="f22e1-153">В этом расположении хранятся все известные пользовательские папки, такие как "Загрузки", "Документы", "Видео", профили пользователей и куст реестра HKEY_CURRENT_USER.</span><span class="sxs-lookup"><span data-stu-id="f22e1-153">All known user folders such as Downloads, Documents, Videos, user profiles and HKEY_CURRENT_USER hive are also stored in this location.</span></span> <span data-ttu-id="f22e1-154">Эти данные невозможно извлечь без соответствующих учетных данных. Дополнительные сведения о защите данных см. в статье [Шифрование и защита данных](security-encryption-data-protection.md).</span><span class="sxs-lookup"><span data-stu-id="f22e1-154">This data cannot be extracted without proper credentials; to learn more about how your data is protected, see [Encryption and Data Protection](security-encryption-data-protection.md).</span></span>

##  <span data-ttu-id="f22e1-155">Изоляция</span><span class="sxs-lookup"><span data-stu-id="f22e1-155">Isolation</span></span>

<span data-ttu-id="f22e1-156">Для достижения такого результата основная операционная система HoloLens 2 используется для основных функций: загрузка, управление оборудованием, ведение журналов и т. д. В основной операционной системы выполняются лишь два набора приложений: предустановленные приложения и приложения UWP.</span><span class="sxs-lookup"><span data-stu-id="f22e1-156">To achieve this balance, HoloLens 2 has a core operating system that is used for primary functions such as booting up, hardware control, logging in etc. There are only two sets of applications that run on the core operating system – pre-installed applications and UWP apps.</span></span>

## <span data-ttu-id="f22e1-157">Подписание кода</span><span class="sxs-lookup"><span data-stu-id="f22e1-157">Code signing</span></span>

<span data-ttu-id="f22e1-158">Цифровые подписи кода позволяют удостовериться, что исполняемые файлы и сценарии не были изменены после подписания надежным источником, за счет чего обеспечивается их подлинность и целостность.</span><span class="sxs-lookup"><span data-stu-id="f22e1-158">Digitally signing code allows substantiation that executables and scripts have not been modified since they were signed by a trusted source therefore providing authenticity and integrity.</span></span> <span data-ttu-id="f22e1-159">Надежными источниками для HoloLens 2 по умолчанию являются: корпорация Майкрософт и Microsoft.</span><span class="sxs-lookup"><span data-stu-id="f22e1-159">The authorities that HoloLens 2 trusts by default are Microsoft and Microsoft Store.</span></span> <span data-ttu-id="f22e1-160">ИТ-администраторы могут добавлять новые сертификаты на устройство с помощью политик [ClientCertificateInstall](https://docs.microsoft.com/windows/client-management/mdm/clientcertificateinstall-csp) и [RootCATrustedCertificates](https://docs.microsoft.com/windows/client-management/mdm/rootcacertificates-csp).</span><span class="sxs-lookup"><span data-stu-id="f22e1-160">IT administrators can add new certificates to the device through the [ClientCertificateInstall](https://docs.microsoft.com/windows/client-management/mdm/clientcertificateinstall-csp) and [RootCATrustedCertificates](https://docs.microsoft.com/windows/client-management/mdm/rootcacertificates-csp) CSPs.</span></span> <span data-ttu-id="f22e1-161">Кроме того, с помощью политики [AllowAllTrustedApps](https://docs.microsoft.com/windows/client-management/mdm/policy-csp-applicationmanagement#applicationmanagement-allowalltrustedapps) можно включить дополнительные загруженные приложения или [бизнес-приложения](https://docs.microsoft.com/intune/apps/lob-apps-windows) в число надежных.</span><span class="sxs-lookup"><span data-stu-id="f22e1-161">They can also use the [AllowAllTrustedApps policy](https://docs.microsoft.com/windows/client-management/mdm/policy-csp-applicationmanagement#applicationmanagement-allowalltrustedapps) to trust additional sideloaded or [Line-of-business apps](https://docs.microsoft.com/intune/apps/lob-apps-windows).</span></span> <span data-ttu-id="f22e1-162">Сертификаты сохраняются в хранилище сертификатов локального компьютера в кусте реестра HKLM/Root (если используется "Устройство") или HKCU (если используется "Пользователь").</span><span class="sxs-lookup"><span data-stu-id="f22e1-162">Certificates reside in the local machine certificate store which is stored in HKLM/Root if using “Device” or in HKCU if using “User”.</span></span>

## <span data-ttu-id="f22e1-163">Защитник Windows</span><span class="sxs-lookup"><span data-stu-id="f22e1-163">Defender protections</span></span>
<span data-ttu-id="f22e1-164">В HoloLens 2 для дополнительной безопасности применяются службы Майкрософт:</span><span class="sxs-lookup"><span data-stu-id="f22e1-164">HoloLens 2 uses Microsoft services to give users an advanced level of security:</span></span>

* <span data-ttu-id="f22e1-165">[Фильтр SmartScreen Защитника Windows](https://docs.microsoft.com/windows/security/threat-protection/microsoft-defender-smartscreen/microsoft-defender-smartscreen-overview) автоматически включается операционной системой в Windows Holographic и защищает от фишинга и вредоносных программ, а также от загрузки потенциально вредоносных файлов в Edge.</span><span class="sxs-lookup"><span data-stu-id="f22e1-165">[Defender SmartScreen](https://docs.microsoft.com/windows/security/threat-protection/microsoft-defender-smartscreen/microsoft-defender-smartscreen-overview) is automatically enabled on Windows Holographic by the OS and protects against phishing and malware, as well as the downloading of potentially malicious files, on Edge.</span></span> <span data-ttu-id="f22e1-166">Эта функция не может быть выключена пользователем, но может быть отключена политикой.</span><span class="sxs-lookup"><span data-stu-id="f22e1-166">It cannot be turned off by the user but can be disabled through policy.</span></span>

* <span data-ttu-id="f22e1-167">[Брандмауэр Защитника Windows](https://docs.microsoft.com/windows/security/threat-protection/windows-firewall/windows-firewall-with-advanced-security) блокирует несанкционированный входящий и исходящий сетевой трафик вашего устройства.</span><span class="sxs-lookup"><span data-stu-id="f22e1-167">[Defender Firewall](https://docs.microsoft.com/windows/security/threat-protection/windows-firewall/windows-firewall-with-advanced-security) blocks unauthorized network traffic from flowing to and from your device.</span></span> <span data-ttu-id="f22e1-168">Он включен по умолчанию и не может быть настроен клиентами путем локальных действий или с помощью политики.</span><span class="sxs-lookup"><span data-stu-id="f22e1-168">It is enabled by default and not configurable by the customer through local actions or policy.</span></span> 

* <span data-ttu-id="f22e1-169">[Управление приложениями в Защитнике Windows](https://docs.microsoft.com/windows/security/threat-protection/windows-defender-application-control/wdac-and-applocker-overview): HoloLens 2 поддерживает WDAC, благодаря чему ИД-администраторы могут применять к устройству политики управления приложениями.</span><span class="sxs-lookup"><span data-stu-id="f22e1-169">[Windows Defender Application Control](https://docs.microsoft.com/windows/security/threat-protection/windows-defender-application-control/wdac-and-applocker-overview):  HoloLens 2 supports WDAC which allows IT admin to push application control policies onto the device.</span></span> <span data-ttu-id="f22e1-170">Дополнительные сведения см. в статье [Использование WDAC для устройств HoloLens 2 с помощью Microsoft Intune](https://docs.microsoft.com/mem/intune/configuration/custom-profile-hololens).</span><span class="sxs-lookup"><span data-stu-id="f22e1-170">More info can be found in [Use WDAC on HoloLens 2 devices with MSFT Intune](https://docs.microsoft.com/mem/intune/configuration/custom-profile-hololens).</span></span> 

<span data-ttu-id="f22e1-171">ИТ-администраторы могут управлять поведением SmartScreen с помощью политики [AllowSmartScreen](https://docs.microsoft.com/windows/client-management/mdm/policy-csp-browser#browser-allowsmartscreen), а для управления поведением браузера можно использовать [эти политики](https://docs.microsoft.com/windows/client-management/mdm/policy-csps-supported-by-hololens2).</span><span class="sxs-lookup"><span data-stu-id="f22e1-171">IT admins can manage SmartScreen behavior through [AllowSmartScreen](https://docs.microsoft.com/windows/client-management/mdm/policy-csp-browser#browser-allowsmartscreen) and browser behavior through [these policies](https://docs.microsoft.com/windows/client-management/mdm/policy-csps-supported-by-hololens2).</span></span> 

