---
title: Разделение состояний и изоляция
description: Сведения о разделении состояний, изоляции, подписывании кода и приложениях Защитника на устройстве смешанной реальности HoloLens 2.
author: evmill
ms.author: v-evmill
ms.reviewer: tagran
ms.date: 6/30/2020
ms.topic: article
keywords: безопасность, HoloLens, разделение состояний, разделение состояний и изоляция, HoloLens 2, безопасность HoloLens 2, обзор безопасности, архитектура безопасности, архитектура, архитектура HoloLens 2
ms.prod: hololens
ms.sitesec: library
ms.localizationpriority: high
manager: yannisle
appliesto:
- HoloLens 2
ms.openlocfilehash: 0487ea49c706c753f4dfca7da7daa499d1715e9f
ms.sourcegitcommit: 05537014d27d9cb60d5485ce93654371d914d5e3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/10/2021
ms.locfileid: "124428997"
---
# <a name="state-separation-and-isolation"></a>Разделение состояний и изоляция

Разделение состояний и изоляция — это защитные механизмы, которые предохраняют от изменений важнейшие компоненты операционной системы HoloLens 2, в том числе компоненты, необходимые для загрузки надежного состояния операционной системы. Технология изоляции позволяет переместить ненадежные приложения в изолированную среду песочницы, чтобы они не могли повлиять на безопасность системы.

## <a name="state-separation"></a>Разделение состояний

Разделение состояний в HoloLens 2 значительно повышает уровень безопасности и удобства обслуживания (обновления), а также помогает защитить данные приложений.  Разделение состояний работает следующим образом:
  * Основная операционная система хранится в томе основной операционной системы (доверенная или проверенная обновляемая ОС Майкрософт).
  * Фрагменты операционной системы, которые могут быть изменены во время выполнения (например, загружаемые драйверы и конфигурации), используют дальнейшее разделение состояний, чтобы отделить данные и хранить их в изолированных безопасных расположениях.
  * С каждым защищенным расположением хранения связаны определенные политики безопасности. За счет этого обеспечиваются различные преимущества безопасности, которые подробно описаны в следующем разделе.

## <a name="state-separation-benefits"></a>Преимущества разделения состояний

  * Безопасность: разделение состояний, реализованное в HoloLens 2, значительно повышает целостность платформы и улучшает ее устойчивость к вредоносным программам, а также повышает надежность защиты пользовательских данных. При разделении состояний неизменяемая часть операционной системы отделяется и становится доступной только для чтения или защищается средствами поддержания целостности данных, поэтому при "холодной" перезагрузке у вредоносных программ практически нет возможности сохраниться. 
  * Обновления: поскольку в HoloLens 2 основная операционная система неизменяемая и четко отделена от остальных данных устройства, обновления устроены очень просто и надежно.  Кроме того, разделение состояний позволяет гораздо быстрее устанавливать обновления, делая возможной замену операционной системы за один шаг (атомную единицу).
  * Сброс устройства: при сбросе HoloLens 2 очищаются пользовательские данные и данные пользовательских приложений на этом устройстве, включая внутреннее и внешнее хранилища. При этом сохраняются текущие приложения ОС и важные приложения безопасности, а также текущие приложения Майкрософт и настроенные (предустановленные) OEM-приложения. Эти предустановленные приложения могут быть восстановлены на устройстве после завершения сброса.

### <a name="state-separation-states"></a>Разделяемые состояния

Разделение состояний гарантирует, что операционная система может быть изменена только доверенными компонентами устройства Майкрософт. При перезагрузке допускается сохранение только важных данных. Остальные системные данные и параметры существуют лишь в течение одного сеанса загрузки и удаляются при перезагрузке. За счет разделения состояний устройство быстро возвращается в исходное состояние (с заводскими параметрами). Состояния Windows Holographic for Business могут быть разделены на следующие категории:
  * Основная операционная система — неизменяемое состояние
  * Данные операционной системы — изменяемое состояние 
  * Пользовательские данные — изменяемое состояние

Каждое из этих состояний HoloLens 2 описывается в следующем разделе.

#### <a name="core-operating-system"></a>Основная операционная система

Неизменяемое состояние состоит из неизменяемых исполняемых файлов и данных; эти файлы и данные могут быть изменены только корпорацией Майкрософт при установке обновлений. В ходе такого обновления основной операционной системы включается новый образ, содержащий последнее желаемое рабочее состояние.
Неизменяемое состояние отмечается как доступное только для чтения (или защищается иным образом), что исключает сохранение вредоносных программ с расширенными правами. В неизменяемом состоянии защищены следующие исполняемые файлы и данные:
  * Встроенные драйверы Windows Holographic
  * Двоичные файлы операционной системы
  * Встроенные драйверы Windows
  * Статические параметры Windows Holographic, хранящиеся в кусте реестра Windows (HKLM)
    * Пример: в HKLM хранятся сведения о конфигурации приложений, установленных на компьютере. Также хранится информация для обнаружения оборудования и соответствующих драйверов.
Сохранение этих данных в неизменяемом состоянии (с защитой целостности данных и доступом только для чтения) гарантирует загрузку основной операционной системы только в доверенном состоянии. Кроме того, при сбросе устройства загружаются только компоненты, находящиеся в неизменяемом разделе. 

#### <a name="operating-system-data"></a>Данные операционной системы 

Важно отметить, что исполняемые файлы и данные, изменяемые во время выполнения (и не являющиеся важными для работы ОС), могут быть удалены и созданы заново в случае повреждения или компрометации. Важные изменяемые данные либо должны быть сохранены операционной системой по соображениям функциональности, либо должны сохраняться после завершения работы операционной системы, а также в ходе перезагрузок в сценариях, поддерживаемых операционной системой Windows и устройством. Примеры важного изменяемого состояния:
  * Настроенные ИТ-администраторами глобальные параметры устройств, например отключение данных расположения для всех пользователей.
  * Данные для подключения к сетям Wi-Fi: сохраненные на устройстве сети и связанные с ними пароли.
  * Аварийные дампы, в том числе параметры и журналы.
  * Драйверы, загруженные по запросу для новых устройств.
Важные изменяемые данные в HoloLens 2 хранятся в защищенном расположении операционной системы либо в виде файла на диске, либо в сохраняемом кусте реестра.

#### <a name="user-data"></a>Пользовательские данные

Последняя категория представляет собой пользовательские данные, созданные или сохраненные приложениями UWP или операционной системой. В этом расположении также хранятся все известные пользовательские папки, такие как "Загрузки", "Документы", "Видео", профили пользователей и куст реестра HKEY_CURRENT_USER. Эти данные невозможно извлечь без соответствующих учетных данных. Дополнительные сведения о защите данных см. в разделе [Шифрование и защита данных](security-encryption-data-protection.md).

##  <a name="isolation"></a>Изоляция

Чтобы достичь этого баланса, в HoloLens 2 есть основная операционная система, которая используется для основных функций, таких как загрузка, управление оборудованием, ведение журналов и т. д. В основной операционной системе выполняются лишь два набора приложений: предустановленные приложения и приложения UWP.

## <a name="code-signing"></a>подписывание кода;

Цифровые подписи кода позволяют удостовериться, что исполняемые файлы и сценарии не были изменены после подписывания надежным источником, за счет чего обеспечивается их подлинность и целостность. Надежными источниками для HoloLens 2 по умолчанию являются: корпорация Майкрософт и Microsoft Store. ИТ-администраторы могут добавлять на устройство новые сертификаты с помощью поставщиков служб настройки [ClientCertificateInstall](/windows/client-management/mdm/clientcertificateinstall-csp) и [RootCATrustedCertificates](/windows/client-management/mdm/rootcacertificates-csp). Они также могут использовать [политику AllowAllTrustedApps](/windows/client-management/mdm/policy-csp-applicationmanagement#applicationmanagement-allowalltrustedapps), чтобы включить доверие для дополнительных загруженных неопубликованных приложений или [бизнес-приложений](/intune/apps/lob-apps-windows). Сертификаты сохраняются в хранилище сертификатов локального компьютера в кусте реестра "HKLM/Root" (если используется "Устройство") или "HKCU" (если используется "Пользователь").

## <a name="defender-protections"></a>Защита, обеспечиваемая Защитником Windows
В HoloLens 2 для дополнительной безопасности применяются службы Майкрософт:

* [SmartScreen Защитника Windows](/windows/security/threat-protection/microsoft-defender-smartscreen/microsoft-defender-smartscreen-overview) автоматически включается операционной системой в Windows Holographic и защищает от фишинга и вредоносных программ, а также от загрузки потенциально вредоносных файлов в Edge. Эта функция не может быть выключена пользователем, но может быть отключена политикой.

* [Брандмауэр Защитника Windows](/windows/security/threat-protection/windows-firewall/windows-firewall-with-advanced-security) блокирует несанкционированный входящий и исходящий сетевой трафик для вашего устройства. Он включен по умолчанию и не может быть настроен клиентами путем локальных действий или с помощью политики. 

* [Управление приложениями в Защитнике Windows (WDAC)](/windows/security/threat-protection/windows-defender-application-control/wdac-and-applocker-overview): HoloLens 2 поддерживает WDAC, что позволяет ИТ-администратору принудительно отправлять политики управления приложениями на устройство. Дополнительные сведения см. в разделе [Использование WDAC на устройствах HoloLens 2 с MSFT Intune](/mem/intune/configuration/custom-profile-hololens). 

ИТ-администраторы могут управлять поведением SmartScreen с помощью [AllowSmartScreen](/windows/client-management/mdm/policy-csp-browser#browser-allowsmartscreen), а для управления поведением браузера можно использовать [эти политики](/windows/client-management/mdm/policy-csps-supported-by-hololens2). 

