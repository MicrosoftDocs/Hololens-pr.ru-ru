---
title: Настройка HoloLens в качестве киоска
description: узнайте, как настроить и использовать конфигурацию киоска для блокировки приложений на HoloLens устройствах.
ms.prod: hololens
ms.sitesec: library
author: dansimp
ms.author: dansimp
ms.topic: article
ms.localizationpriority: medium
ms.date: 10/27/2020
ms.custom:
- CI 115262
- CI 111456
- CSSTroubleshooting
ms.reviewer: ''
manager: laurawi
appliesto:
- HoloLens (1st gen)
- HoloLens 2
ms.openlocfilehash: e7f1efa99cc16b1003bd7063817451013ed2ec2661dbdf02edcd89c7984d0980
ms.sourcegitcommit: f8e7cc2fbdcdf8962700fd50b9c017bd83d1ad65
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/05/2021
ms.locfileid: "115663990"
---
# <a name="set-up-hololens-as-a-kiosk"></a>Настройка HoloLens в качестве киоска

можно настроить HoloLens устройство для работы в качестве устройства с фиксированной назначением, также называемое *киоском*, настроив устройство для работы в полноэкранном режиме. Режим киоска ограничивает приложения (или пользователей), доступные на устройстве. режим киоска — это удобная функция, с помощью которой можно выделить HoloLens устройство для бизнес-приложений или использовать устройство HoloLens в демонстрации приложения.

эта статья содержит сведения о аспектах настройки киоска, характерных для устройств HoloLens. общие сведения о различных типах киосков на основе Windows и их настройке см. [в разделе настройка киосков и цифровых подписывания Windows настольных выпусков](/windows/configuration/kiosk-methods).  

> [!IMPORTANT]  
> Режим киоска определяет, какие приложения доступны при входе пользователя на устройство. Однако режим киоска не является методом безопасности. Приложение "Allowed" не останавливает открытие другого приложения, которое запрещено. чтобы заблокировать открытие приложений или процессов, используйте [CSP Защитник Windows Application Control (WDAC)](/windows/client-management/mdm/applicationcontrol-csp) для создания соответствующих политик.
>
> дополнительные сведения о службы Майкрософт для предоставления пользователям расширенного уровня безопасности, который HoloLens 2 использует, см. дополнительные сведения о [разделении состояния и защите защитника с изоляцией](security-state-separation-isolation.md#defender-protections). или узнайте, как [использовать WDAC и Windows PowerShell для разрешения или блокировки приложений на HoloLens 2 устройствах с помощью Microsoft Intune](/mem/intune/configuration/custom-profile-hololens).

Режим киоска можно использовать в конфигурации с одним приложением или несколькими приложениями. для настройки и развертывания конфигурации киоска можно использовать один из трех процессов.

> [!IMPORTANT]  
> При удалении конфигурации с несколькими приложениями удаляются профили блокировки пользователей, созданные с помощью назначенной функции доступа. Однако при этом не выполняется откат всех изменений политики. Чтобы отменить эти политики, необходимо сбросить параметры устройства до заводских настроек.

## <a name="plan-the-kiosk-deployment"></a>Планирование развертывания киоска

При планировании киоска необходимо иметь возможность ответить на следующие вопросы. Ниже приведены некоторые решения, которые следует учитывать при чтении этой страницы, и некоторые рекомендации по этим вопросам.
1. **Кто будет использовать ваш киоск и какие [типы учетных записей](hololens-identity.md) будут использоваться?** Это решение, которое вы, вероятно, уже сделали, и его не следует корректировать для вашего киоска, но это повлияет на то, как оно будет назначено позже.
1. **Нужно ли использовать разные киоски для каждого пользователя или группы или киоска, не включенный для некоторых из них?** В этом случае вы захотите создать киоск с помощью XML. 
1. **Сколько приложений будет в вашем киоске?** Если у вас больше 1 приложения, вам потребуется киоск с несколькими приложениями. 
1. **Какие приложения будут находиться в вашем киоске?** Используйте наш список Аумидс ниже, чтобы добавить любые In-Box приложения в дополнение к собственным.
1. **Как вы планируете развернуть киоск?** Если вы регистрируете устройство в MDM, мы рекомендуем использовать MDM для развертывания киоска. Если вы не используете MDM, то доступно развертывание с пакетом подготовки.  

### <a name="kiosk-mode-requirements"></a>Требования режима киоска

любое HoloLens 2 устройство можно настроить для использования режима киоска.

> [!IMPORTANT]
> Режим киоска доступен только в том случае, если устройство имеет Windows Holographic for Business. все устройства HoloLens 2 поставляются с Windows Holographic for Business, а другие выпуски отсутствуют. каждое устройство HoloLens 2 может запустить полноэкранный режим.
>
> HoloLens (1 gen) устройства должны быть обновлены с точки зрения сборки ос и выпуска ос. ниже приведены дополнительные сведения об обновлении HoloLens (1-го поколения) до [Windows Holographic for Business](hololens1-upgrade-enterprise.md) edition. чтобы обновить устройство HoloLens (1-го поколения) для использования режима киоска, сначала необходимо убедиться, что устройство работает Windows 10, версии 1803 или более поздней версии. если вы использовали средство восстановления Windows устройства для восстановления HoloLens (1-го поколения) на сборку по умолчанию или если установлены последние обновления, устройство готово к настройке.

> [!IMPORTANT]  
> Чтобы обеспечить защиту устройств, работающих в полноэкранном режиме, рекомендуется добавить политики управления устройствами, которые отключают такие функции, как подключение по USB. Кроме того, проверьте параметры круга обновлений, чтобы гарантировать, что автоматическое обновление не будет выполняться в рабочее время.

### <a name="decide-between-a-single-app-kiosk-or-a-multi-app-kiosk"></a>Выбор между киоском с одним приложением или киоском с несколькими приложениями

Киоск с одним приложением запускает указанное приложение при входе пользователя на устройство. меню отключена, как Кортана. устройство HoloLens 2 не отвечает на жест [запуска](hololens2-basic-usage.md#start-gesture) . HoloLensное (первое поколение) устройство не реагирует на жест [раскрытия](hololens1-basic-usage.md) . Поскольку может выполняться только одно приложение, пользователь не может размещать другие приложения.

киоск с несколькими приложениями отображает меню при входе пользователя на устройство. конфигурация киоска определяет, какие приложения доступны на меню. Вы можете использовать многоприложениеное киоск, чтобы предоставить пользователям удобные возможности для работы, предоставляя им только те вещи, которые они должны использовать, и устранять ненужные вещи.

В следующей таблице перечислены возможности функций в различных режимах киоска.

| &nbsp; |Меню "Пуск" |Меню быстрых действий |Камера и видео |Miracast |Кортана |Встроенные Voice-команды |
| --- | --- | --- | --- | --- | --- | --- | 
|Киоск с одним приложением |Выключено |Выключено |Выключено |Выключено   |Выключено |Включено<sup>1</sup> |
|Киоск с несколькими приложениями |Активировано |Включено<sup>2</sup> |Доступно<sup>2</sup> |Доступно<sup>2</sup> |Доступно<sup>2, 3</sup>  |Включено<sup>1</sup> |

> <sup>1</sup> голосовые команды, относящиеся к отключенным функциям, не работают.  
> <sup>2</sup> дополнительные сведения о настройке этих функций см. в разделе [Выбор приложений киоска](#plan-kiosk-apps).  
> <sup>3</sup> даже если Кортана отключена, встроенные команды voice включены.

В следующей таблице перечислены функции поддержки пользователей различных режимов киоска.

| &nbsp; |Поддерживаемые типы пользователей | Автоматический вход | Несколько уровней доступа |
| --- | --- | --- | --- |
|Киоск с одним приложением | учетная запись майкрософт (MSA) в Azure Active Directory (Azure AD) или локальной учетной записи |Да |Нет |
|Киоск с несколькими приложениями |Учетная запись Azure AD |Нет |Да |

Примеры использования этих возможностей см. в следующей таблице.

|Используйте киоск с одним приложением для: |Используйте киоск с несколькими приложениями для: |
| --- | --- |
|Устройство, которое работает только с руководством по Dynamics 365 для новых сотрудников. |Устройство, которое запускает как руководства, так и удаленный помощник для ряда сотрудников. |
|Устройство, которое запускает только пользовательское приложение. |Устройство, которое выступает в качестве киоска для большинства пользователей (запустив только пользовательское приложение), но работает как стандартное устройство для определенной группы пользователей. |

### <a name="plan-kiosk-apps"></a>Планирование приложений киоска

Общие сведения о выборе приложений киоска см. в разделе [рекомендации по выбору приложения для назначенного доступа (режим киоска)](/windows/configuration/guidelines-for-assigned-access-app).

если вы используете портал устройств Windows для настройки киоска с одним приложением, вы выбираете приложение в процессе установки.  

Если для настройки режима киоска используется система управления мобильными устройствами (MDM) или пакет подготовки, то для указания приложений используется [поставщик службы настройки ассигнедакцесс (CSP)](/windows/client-management/mdm/assignedaccess-csp) . CSP использует [идентификаторы модели пользователя приложения (аумидс)](/windows/configuration/find-the-application-user-model-id-of-an-installed-app) для идентификации приложений. В следующей таблице перечислены Аумидс некоторых встроенных приложений, которые можно использовать в киоске с несколькими приложениями.

> [!IMPORTANT]
> Режим киоска определяет, какие приложения доступны при входе пользователя на устройство. Однако режим киоска не является методом безопасности. Приложение "Allowed" не останавливает открытие другого приложения, которое запрещено. так как мы не ограничены этим поведением, приложения по-прежнему могут запускаться из приложений с пограничным, проводником и Microsoft Store. если есть определенные приложения, которые не нужно запускать из киоска, используйте [CSP Защитник Windows Application Control (WDAC)](/windows/client-management/mdm/applicationcontrol-csp) для создания соответствующих политик. 
> 
> Кроме того, Домашняя страница Mixed Reality не может быть задана в качестве приложения киоска.

<a id="aumids"></a>

|имя приложения; |AUMID |
| --- | --- |
|Средство 3D-просмотра |Microsoft. Microsoft3DViewer \_ 8wekyb3d8bbwe \! Microsoft. Microsoft3DViewer |
|Calendar |Microsoft. виндовскоммуникатионсаппс \_ 8wekyb3d8bbwe \! Microsoft. виндовсливе. Calendar |
|Камера<sup>1, 2</sup> |Холокамера \_ cw5n1h2txyewy \! холокамера |
|Кортана<sup>3</sup> |Приложение Microsoft. 549981C3F5F10 \_ 8wekyb3d8bbwe \! |
|средство выбора устройств на HoloLens (1-й общий) |Холодевицесфлов \_ cw5n1h2txyewy \! холодевицесфлов |
|Средство выбора устройств на HoloLens 2 |NNTP. Windows. Девицесфловхост \_ cw5n1h2txyewy \! Microsoft. Windows. девицесфловхост |
|Dynamics 365 Guides |Microsoft. Dynamics365. Guides \_ 8wekyb3d8bbwe \! микрософтгуидес |
|Dynamics 365 Remote Assist; |Microsoft. Микрософтремотеассист \_ 8wekyb3d8bbwe \! Microsoft. ремотеассист |
|Центр обратной связи &nbsp; |Приложение Microsoft. Виндовсфидбаккхуб \_ 8wekyb3d8bbwe \! |
|Проводник |c5e2524a-ea46-4f67-841f-6a9465d9d515_cw5n1h2txyewy!App |
|Mail |microsoft.windowscommunicationsapps_8wekyb3d8bbwe! Microsoft. виндовсливе. mail |
|Старая Microsoft Edge |Microsoft.MicrosoftEdge_8wekyb3d8bbwe!MicrosoftEdge |
|Новые Microsoft Edge |Microsoft.MicrosoftEdge.Stable_8wekyb3d8bbwe! мседже |
|Microsoft Store |Microsoft.WindowsStore_8wekyb3d8bbwe!App |
|Miracast<sup>4</sup> |&nbsp; |
|Кино и ТВ |Microsoft. Зуневидео \_ 8wekyb3d8bbwe \! Microsoft. зуневидео |
|OneDrive |приложение Microsoft. микрософтскидриве \_ 8wekyb3d8bbwe \! |
|"Фото" |NNTP. Windows. Фото \_ 8wekyb3d8bbwe \! приложение |
|старая Параметры |HolographicSystemSettings_cw5n1h2txyewy! Приложения |
|новые Параметры |BAEAEF15-9BAB-47FC-800B-ACECAD2AE94B_cw5n1h2txyewy! Приложения |
|Советы |Microsoft. Хололенстипс \_ 8wekyb3d8bbwe \! хололенстипс |

> <sup>1</sup> чтобы включить запись фотографий или видео, необходимо включить приложение камеры в качестве приложения киоска.  
> <sup>2</sup> при включении приложения Camera учитывайте следующие условия.
> - Меню Быстрые действия содержит кнопки фото и видео.  
> - необходимо также включить приложение (например, фотографии, письма или OneDrive), которое может взаимодействовать с изображениями или извлекать их.  
>  
> <sup>3</sup> даже если вы не включаете Кортана в качестве приложения киоска, встроенные voice-команды включены. Однако команды, связанные с отключенными функциями, не действуют.  
> <sup>4</sup> нельзя включить Miracast напрямую. Чтобы включить Miracast в качестве приложения киоска, включите приложение Camera и средство выбора устройств.

### <a name="plan-kiosk-profiles-for-users-or-groups"></a>Планирование профилей киоска для пользователей или групп

При создании XML-файла или использовании пользовательского интерфейса Intune для настройки киоска необходимо подумать, кто будет пользователем в киоске. Конфигурация киоска может быть ограничена отдельной учетной записью или группами Azure AD. 

Обычно киоски включены как для пользователя, так и для группы пользователей. Однако если вы планируете написать собственный XML-киоск, вам может потребоваться использовать глобально назначенный доступ, при котором киоск применяется на уровне устройства независимо от удостоверения. Если это отображались, [Ознакомьтесь с дополнительными сведениями о киосках с глобальными назначенными доступом.](hololens-global-assigned-access-kiosk.md)

#### <a name="if-you-are-creating-an-xml-file"></a>При создании XML-файла:
-   Вы много создаете несколько профилей киосков и назначаете их разным пользователям и группам. Например, киоск для группы Azure AD, в которой есть много приложений, и посетитель, имеющий несколько киосков приложений с приложением в единственном числе.
-   Конфигурация киоска будет называться **идентификатором профиля** и иметь идентификатор GUID.
-   Этот профиль будет назначен в разделе конфигурации, указав тип пользователя и используя тот же идентификатор GUID для **идентификатора дефаултпрофиле**.
- XML-файл может быть создан, но по-прежнему применен к устройству через MDM путем создания настраиваемого профиля конфигурации устройства URI OMA и его применения к HoloLens группе устройств с помощью значения URI:./девице/вендор/мсфт/ассигнедакцесс/конфигуратион

#### <a name="if-you-are-creating-a-kiosk-in-intune"></a>При создании киоска в Intune.
-   Каждое устройство может получить только один профиль киоска, в противном случае он создаст конфликт и не получит ни одной конфигурации киоска. 
    -   Другие типы профилей и политик, такие как ограничения устройств, не связанные с профилем конфигурации киоска, не конфликтуют с профилем конфигурации киоска.
-   Киоск будет включен для всех пользователей, которые входят в тип входа пользователя. это значение будет задано пользователем или группой Azure AD. 
-   После настройки конфигурации киоска и выбора **типа входа пользователя** (пользователи, которые могут войти в киоск) и выбранных приложений конфигурация устройства должна быть назначена группе. Назначенные группы определяют, какие устройства получают конфигурацию устройства киоска, но не взаимодействуют с при включенном киоске. 
    - Полное описание последствий назначения профилей конфигурации в Intune см. [в разделе Назначение профилей пользователей и устройств в Microsoft Intune](/intune/configuration/device-profile-assign).

### <a name="select-a-deployment-method"></a>Выбор метода развертывания

Для развертывания конфигураций киоска можно выбрать один из следующих методов.

- [Microsoft Intune или другая служба управления мобильными устройствами (MDM)](#use-microsoft-intune-or-other-mdm-to-set-up-a-single-app-or-multi-app-kiosk)

- [Подготовка пакета](#use-a-provisioning-package-to-set-up-a-single-app-or-multi-app-kiosk)

- [Портал устройств Windows](#use-the-windows-device-portal-to-set-up-a-single-app-kiosk)

   > [!NOTE]  
   > Так как для этого метода требуется включить режим разработчика на устройстве, рекомендуется использовать его только для демонстрации.

В следующей таблице перечислены возможности и преимущества каждого из методов развертывания.

| &nbsp; |развертывание с помощью Windows портала устройств |Развертывание с помощью пакета подготовки |Развертывание с помощью MDM |
| --------------------------- | ------------- | -------------------- | ---- |
|Развертывание киосков с одним приложением   | Да           | Да                  | Да  |
|Развертывание киосков с несколькими приложениями    | Нет            | Да                  | Да  |
|Развертывать только на локальных устройствах | Да           | Да                  | Нет   |
|Развертывание с помощью режима разработчика |Обязательно       | Не требуется            | Не требуется   |
|Развертывание с помощью Azure Active Directory (Azure AD)  | Не требуется            | Не требуется                   | Обязательно  |
|Развернуть автоматически      | Нет            | Нет                   | Да  |
|Скорость развертывания            | быстрый;       | Быстр.                 | Медл. |
|Развертывание в масштабе | Не рекомендуется    | Рекомендуемая        | Рекомендуемая |

## <a name="use-microsoft-intune-or-other-mdm-to-set-up-a-single-app-or-multi-app-kiosk"></a>использование Microsoft Intune или другого MDM для настройки киоска с одним приложением или несколькими приложениями

чтобы настроить полноэкранный режим с помощью Microsoft Intune или другой системы MDM, выполните следующие действия.

1. [Подготовка к регистрации устройств](#mdmenroll).
1. [Создайте профиль конфигурации киоска](#mdmprofile).
1. Настройка киоска.
   - [Настройка параметров для киоска с одним приложением](#mdmconfigsingle).
   - [Настройка параметров для киоска с несколькими приложениями](#mdmconfigmulti).
1. [Назначьте профиль конфигурации киоска группе](#mdmassign).
1. Разверните устройства.
   - [Развертывание киоска с одним приложением](#mdmsingledeploy).
   - [Развертывание киоска с несколькими приложениями](#mdmmultideploy).

### <a name="mdm-step-1-ndash-prepare-to-enroll-the-devices"></a><a id="mdmenroll"></a>MDM, шаг 1. &ndash; Подготовка к регистрации устройств

вы можете настроить в системе MDM автоматическую регистрацию HoloLens устройств при первом входе пользователя в систему или попросите пользователей регистрировать устройства вручную. Кроме того, устройства должны быть присоединены к домену Azure AD и назначены соответствующим группам.

дополнительные сведения о регистрации устройств см. [в статье регистрация HoloLens в MDM](hololens-enroll-mdm.md) и [методы регистрации Intune для устройств Windows](/mem/intune/enrollment/windows-enrollment-methods).

### <a name="mdm-step-2-ndash-create-a-kiosk-configuration-profile"></a><a id="mdmprofile"></a>MDM, шаг 2. &ndash; Создание профиля конфигурации киоска

1. Откройте портал [Azure](https://portal.azure.com/) и войдите в учетную запись администратора Intune.
1. выберите **Microsoft Intune**  >  **конфигурация устройства — профили**  >  **создать профиль**.
1. Введите имя профиля.
1. выберите **платформа**  >  **Windows 10 и более поздние версии**, а затем выберите **профиль тип**  > **устройства ограничения**.
1. Выберите **Настройка**  >  **киоска**, а затем выберите один из следующих параметров:
   - Чтобы создать киоск с одним приложением, выберите **режим киоска**  >  **с одним приложением киоск**.
   - Чтобы создать киоск с несколькими приложениями, выберите **режим** киоска  >  **с несколькими приложениями**.
1. Чтобы начать настройку киоска, нажмите кнопку **Добавить**.

Дальнейшие действия зависят от требуемого типа киоска. Для получения дополнительных сведений выберите один из следующих вариантов.  

- [Киоск с одним приложением](#mdmconfigsingle)
- [Киоск с несколькими приложениями](#mdmconfigmulti)

дополнительные сведения о создании профиля конфигурации киоска см. в разделе [Windows 10 и Windows Holographic for Business параметры устройства для запуска в качестве выделенного киоска с помощью Intune](/intune/configuration/kiosk-settings).

### <a name="mdm-step-3-single-app-ndash--configure-the-settings-for-a-single-app-kiosk"></a><a id="mdmconfigsingle"></a>MDM, шаг 3 (одно приложение) &ndash;  Настройка параметров для киоска с одним приложением

В этом разделе перечислены параметры, необходимые киоску для одного приложения. Дополнительные сведения см. в следующих статьях:

- Сведения о настройке профиля конфигурации киоска в Intune см. в статье [Настройка режима киоска с помощью Microsoft Intune](hololens-commercial-infrastructure.md#how-to-configure-kiosk-mode-using-microsoft-intune).
- Дополнительные сведения о доступных параметрах киосков с одним приложением в Intune см. в разделе [одноэкранное](/intune/configuration/kiosk-settings-holographic#single-full-screen-app-kiosks) полноэкранное приложение.
- Инструкции по другим службам MDM см. в документации вашего поставщика. Если необходимо использовать настраиваемую конфигурацию XML для настройки киоска в службе MDM, [Создайте XML-файл, определяющий конфигурацию киоска](#ppkioskconfig).

1. Выберите **Вход пользователя тип**  >  **учетная запись локального пользователя**, а затем введите имя пользователя локальной учетной записи (устройства) или учетной записи Майкрософт (MSA), которая может входить в киоск.
   > [!NOTE]  
   > Типы учетных записей пользователей с **автоматическим входом в систему** не поддерживаются в Windows Holographic for Business.
1. Выберите **приложение магазин типов приложений**  >  , а затем выберите приложение из списка.

Следующим шагом является [назначение](#mdmassign) профиля группе.

### <a name="mdm-step-3-multi-app-ndash-configure-the-settings-for-a-multi-app-kiosk"></a><a id="mdmconfigmulti"></a>MDM, шаг 3 (несколько приложений) &ndash; Настройка параметров для киоска с несколькими приложениями

В этом разделе приводится сводка параметров, необходимых для работы киоска с несколькими приложениями. Дополнительные сведения см. в следующих статьях:

- Сведения о настройке профиля конфигурации киоска в Intune см. в статье [Настройка режима киоска с помощью Microsoft Intune](hololens-commercial-infrastructure.md#how-to-configure-kiosk-mode-using-microsoft-intune).
- Дополнительные сведения о доступных параметрах киосков с несколькими приложениями в Intune см. в статье [киоски с несколькими приложениями](/mem/intune/configuration/kiosk-settings-holographic#multi-app-kiosks) .
- Инструкции по другим службам MDM см. в документации вашего поставщика. Если необходимо использовать настраиваемую конфигурацию XML для настройки киоска в службе MDM, [Создайте XML-файл, определяющий конфигурацию киоска](#ppkioskconfig). При использовании XML-файла убедитесь, что включен [начальный макет](#start-layout-for-hololens).  
- При необходимости можно использовать пользовательский макет начального расположения с Intune или другими службами MDM. Дополнительные сведения см. в статье [начало файла макета для MDM (Intune и другие)](#start-layout-file-for-mdm-intune-and-others).

1. выберите **целевой Windows 10 в режимах устройства S**  >  .  
>[!NOTE]  
> Режим S не поддерживается в Windows Holographic for Business.

1. выберите **вход пользователя тип**  >  **пользователя или группы** или **тип входа** пользователя Azure AD  >  **HoloLens посетителя**, а затем добавьте одну или несколько групп пользователей или учетных записей.  

   Только пользователи, которые принадлежат к группам или учетным записям, указанным в поле **тип входа пользователя** , могут использовать киоск.

1. Выберите одно или несколько приложений, используя следующие параметры:
   - Чтобы добавить отправленное бизнес-приложение, выберите **Добавить приложение Магазина** , а затем выберите нужное приложение.
   - Чтобы добавить приложение, указав его AUMID, выберите **Добавить by AUMID** , а затем введите AUMID приложения. [См. список доступных Аумидс](#aumids)

Следующим шагом является [назначение](#mdmassign) профиля группе.

### <a name="mdm-step-4-ndash-assign-the-kiosk-configuration-profile-to-a-group"></a><a id="mdmassign"></a>MDM, шаг 4. &ndash; Назначение профиля конфигурации киоска группе

Используйте страницу **назначения** в профиле конфигурации киоска, чтобы задать, где следует развернуть конфигурацию киоска. в самом простом случае вы назначаете профиль конфигурации киоска группе, которая будет содержать устройство HoloLens, когда устройство регистрируется в MDM.

### <a name="mdm-step-5-single-app-ndash-deploy-a-single-app-kiosk"></a><a id="mdmsingledeploy"></a>MDM, шаг 5 (одно приложение) &ndash; развертывание киоска с одним приложением

При использовании системы MDM можно зарегистрировать устройство в MDM во время OOBE. После завершения OOBE вход на устройство становится непростым.

Во время OOBE выполните следующие действия.

1. Войдите, используя учетную запись, указанную в профиле конфигурации киоска.
1. Зарегистрируйте устройство. Убедитесь, что устройство добавлено в группу, которой назначен профиль конфигурации киоска.
1. Дождитесь завершения OOBE, для скачивания и установки приложения Магазина, а также для применения политик. Затем перезапустите устройство.

При следующем входе на устройство приложение киоска должно автоматически запуститься.

Если на этом этапе конфигурация киоска не отображается, [Проверьте состояние назначения](/intune/configuration/device-profile-monitor).

### <a name="mdm-step-5-multi-app-ndash-deploy-a-multi-app-kiosk"></a><a id="mdmmultideploy"></a>MDM, шаг 5 (несколько приложений) &ndash; развертывание киоска с несколькими приложениями

При использовании системы MDM можно присоединить устройство к клиенту Azure AD и зарегистрировать устройство в MDM во время OOBE. При необходимости предоставьте сведения о регистрации пользователям, чтобы они были доступны во время процесса OOBE.

> [!NOTE]  
> Если вы назначили профиль конфигурации киоска группе, содержащей пользователей, убедитесь, что одна из этих учетных записей является первой учетной записью для входа на устройство.

Во время OOBE выполните следующие действия.

1. Войдите в систему, используя учетную запись, которая принадлежит к группе **типов входа пользователя** .
1. Зарегистрируйте устройство.
1. Подождите, пока все приложения, которые являются частью профиля конфигурации киоска, будут скачаны и установлены. Кроме того, дождитесь применения политик.  
1. После завершения OOBE можно установить дополнительные приложения из Microsoft Store или для загрузки неопубликованных приложений. [Обязательные приложения](/mem/intune/apps/apps-deploy#assign-an-app) для группы, к которой принадлежит устройство, устанавливаются автоматически.
1. После завершения установки перезапустите устройство.

При следующем входе на устройство с помощью учетной записи, которая принадлежит к **типу входа пользователя**, приложение киоска должно автоматически запуститься.

Если на этом этапе конфигурация киоска не отображается, [Проверьте состояние назначения](/intune/configuration/device-profile-monitor).

## <a name="use-a-provisioning-package-to-set-up-a-single-app-or-multi-app-kiosk"></a>Использование пакета подготовки для установки одного приложения или киоска с несколькими приложениями

Чтобы настроить полноэкранный режим с помощью пакета подготовки, выполните следующие действия.

1. [Создайте XML-файл, определяющий конфигурацию киоска.](#ppkioskconfig), включая [начальный макет](#start-layout-for-hololens).
2. [Добавьте XML-файл в пакет подготовки.](#ppconfigadd)
3. [Примените пакет подготовки к HoloLens.](#ppapply)

### <a name="provisioning-package-step-1-ndash-create-a-kiosk-configuration-xml-file"></a><a id="ppkioskconfig"></a>Пакет подготовки, шаг 1. &ndash; Создание XML-файла конфигурации киоска

выполните [общие инструкции, чтобы создать XML-файл конфигурации киоска для Windows desktop](/windows/configuration/lock-down-windows-10-to-specific-apps#create-xml-file), за исключением следующих:

- не включайте классические Windows приложения (Win32). HoloLens не поддерживает эти приложения.
- Используйте [начальный макет XML](#start-layout-for-hololens) для HoloLens.
- Необязательно. Добавление гостевого доступа к конфигурации киоска

#### <a name="optional-add-guest-access-to-the-kiosk-configuration"></a><a id="ppkioskguest"></a>Необязательно. Добавление гостевого доступа к конфигурации киоска

В разделе [ **конфигурации** XML-файла](/windows/configuration/lock-down-windows-10-to-specific-apps#configs)можно настроить специальную группу с именем **посетителя** , чтобы разрешить гостям использовать киоск. Когда киоск настроен для поддержки специальной группы **посетителей** , на страницу входа добавляется параметр "**гость**". Учетная запись **гостя** не требует пароля, и любые данные, связанные с учетной записью, удаляются при выходе из учетной записи.

Чтобы включить учетную запись **гостя** , добавьте следующий фрагмент в XML-файл конфигурации киоска:

```xml
<Configs>
  <Config>  
    <SpecialGroup Name="Visitor" />  
    <DefaultProfile Id="enter a profile ID"/>  
  </Config>  
</Configs>  
```
#### <a name="enable-visitor-autologon"></a>Включить автоматический вход посетителя

в сборках [Windows holographic, version 21H1](hololens-release-notes.md#windows-holographic-version-21h1) и далее:
- Службы AAD и недобавленные конфигурации поддерживают автоматическую регистрацию учетных записей посетителей для полноэкранного режима.

##### <a name="non-aad-configuration"></a>Конфигурация без AAD

1. Создайте пакет подготовки, который:
    1. Настраивает параметры среды выполнения/Ассигнедакцесс для разрешения учетных записей посетителей.
    1. При необходимости регистрирует устройство в MDM (параметры среды выполнения/Рабочая область/регистрации), чтобы его можно было управлять позже.
    1. Не создавать локальную учетную запись
2. [Примените пакет подготовки](hololens-provisioning.md).

##### <a name="aad-configuration"></a>Конфигурация AAD

Устройства, присоединенные к AAD, настроенные для полноэкранного режима, могут войти в учетную запись посетителя с помощью одной кнопки на экране входа. После входа в учетную запись посетителя устройство не будет запрашивать вход снова, пока посетитель не выйдет из меню "Пуск" или не перезапускает устройство.

Для управления автовходом посетителя можно использовать [настраиваемую политику OMA-URI](/mem/intune/configuration/custom-settings-windows-10):

- Значение URI:./девице/вендор/мсфт/микседреалити/виситораутологон


| Политика |Описание |Конфигурации 
| --------------------------- | ------------- | -------------------- |
| Микседреалити/Виситораутологон | Позволяет посетителю выполнять автоматический вход в киоск. | 1 (да), 0 (нет, по умолчанию). |

#### <a name="placeholder-start-layout-for-hololens"></a><a id="start-layout-for-hololens"></a>Начальный макет заполнителя для HoloLens

Если для настройки киоска с несколькими приложениями используется [пакет подготовки](#use-a-provisioning-package-to-set-up-a-single-app-or-multi-app-kiosk) , то процедура требует начального макета. Настройка макета "начало" не поддерживается в Windows Holographic for Business. Поэтому необходимо использовать начальный макет заполнителя.

> [!NOTE]  
> так как киоск с одним приложением запускает приложение киоска при входе пользователя в систему, он не использует меню и не обязательно должен иметь начальный макет.

> [!NOTE]  
> При использовании [MDM](#use-microsoft-intune-or-other-mdm-to-set-up-a-single-app-or-multi-app-kiosk) для настройки киоска с несколькими приложениями при необходимости можно использовать начальный макет. Дополнительные сведения см. в разделе [прототип начала файла макета для MDM (Intune и другие)](#start-layout-file-for-mdm-intune-and-others).

В качестве начального макета добавьте следующий раздел **StartLayout** в XML-файл подготовки киоска:

```xml
<!-- This section is required for parity with Desktop Assigned Access. It is not currently used on HoloLens -->
            <StartLayout>
                <![CDATA[<LayoutModificationTemplate xmlns:defaultlayout="http://schemas.microsoft.com/Start/2014/FullDefaultLayout" xmlns:start="http://schemas.microsoft.com/Start/2014/StartLayout" Version="1" xmlns="http://schemas.microsoft.com/Start/2014/LayoutModification">
                      <LayoutOptions StartTileGroupCellWidth="6" />
                      <DefaultLayoutOverride>
                        <StartLayoutCollection>
                          <defaultlayout:StartLayout GroupCellWidth="6">
                            <start:Group Name="">
                              <start:Tile Size="2x2" Column="0" Row="0" AppUserModelID="placeholderpackagename_kzf8qxf38zg5c!App" />
                            </start:Group>
                          </defaultlayout:StartLayout>
                        </StartLayoutCollection>
                      </DefaultLayoutOverride>
                    </LayoutModificationTemplate>
                ]]>
            </StartLayout>
            <!-- This section is required for parity with Desktop Assigned Access. It is not currently used on HoloLens -->
```

#### <a name="placeholder-start-layout-file-for-mdm-intune-and-others"></a><a id="start-layout-file-for-mdm-intune-and-others"></a>Заполнитель: начальный макет файла для MDM (Intune и другие)

Сохраните следующий пример в виде XML-файла. этот файл можно использовать при настройке киоска с несколькими приложениями в Microsoft Intune (или в другой службе MDM, предоставляющей профиль киоска).

> [!NOTE]
> Если для настройки киоска в службе MDM необходимо использовать пользовательский параметр и полную конфигурацию XML, используйте [инструкции начального макета для пакета подготовки](#start-layout-for-hololens).

```xml
<LayoutModificationTemplate
    xmlns="http://schemas.microsoft.com/Start/2014/LayoutModification"
    xmlns:defaultlayout="http://schemas.microsoft.com/Start/2014/FullDefaultLayout"
    xmlns:start="http://schemas.microsoft.com/Start/2014/StartLayout"
    Version="1">
  <RequiredStartGroupsCollection>
    <RequiredStartGroups>
      <AppendGroup Name="">
        <start:Tile Size="2x2" Column="0" Row="0" AppUserModelID="placeholderpackagename_kzf8qxf38zg5c!App" />
      </AppendGroup>
    </RequiredStartGroups>
  </RequiredStartGroupsCollection>
 </LayoutModificationTemplate>
```

### <a name="prov-package-step-2-ndash-add-the-kiosk-configuration-xml-file-to-a-provisioning-package"></a><a id="ppconfigadd"></a>Prov. пакет, шаг 2. &ndash; Добавление XML-файла конфигурации киоска в пакет подготовки

1. откройте [конструктор конфигураций Windows](https://www.microsoft.com/store/apps/9nblggh4tx22).
1. Выберите **Расширенная подготовка**, введите имя проекта и нажмите кнопку **Далее**.
1. выберите **Windows 10 Holographic**, а затем нажмите кнопку **далее**.
1. Нажмите кнопку **Готово**. Откроется рабочая область для вашего пакета.
1. Выберите **Параметры среды выполнения**  >  **ассигнедакцесс**  >  **мултиаппассигнедакцесссеттингс**.
1. В центральной области выберите **Обзор** , чтобы найти и выбрать созданный XML-файл конфигурации киоска.

   ![Снимок экрана: поле MultiAppAssignedAccessSettings в конструкторе конфигураций Windows](./images/multiappassignedaccesssettings.png)

1. **Необязательно**. (Если вы хотите применить пакет подготовки после первоначальной настройки устройства, а пользователь с правами администратора уже доступен на устройстве киоска, пропустите этот шаг.) Выберите **Параметры среды выполнения** &gt; **учетные записи** &gt; **Пользователи**, а затем создайте учетную запись пользователя. Укажите имя пользователя и пароль, а затем выберите **Группа пользователей**  >  **Administrators (администраторы**).  
  
     С помощью этой учетной записи можно просмотреть состояние подготовки и журналы.  
1. **Необязательно**. (Если у вас уже есть учетная запись без прав администратора на устройстве киоска, пропустите этот шаг.) Выберите **Параметры среды выполнения** &gt; **учетные записи** &gt; **Пользователи**, а затем создайте локальную учетную запись пользователя. Убедитесь, что имя пользователя совпадает с именем учетной записи, указанной в XML-файле конфигурации. Выберите **Группа пользователей**  >  **обычные пользователи**.
1. Выберите **Файл** > **Сохранить**.
1. Выберите **Экспорт**  >  **пакета подготовки**, а затем щелкните **владелец**  >  **ИТ Admin**. Этот параметр задает приоритет пакета подготовки выше, чем подготовка пакетов, которые применяются к этому устройству из других источников.
1. Выберите **Далее**.
1. На странице **Подготовка пакета безопасности** выберите вариант безопасности.
   > [!IMPORTANT]  
   > Если выбран параметр **включить Подписывание пакетов**, необходимо также выбрать действительный сертификат, который будет использоваться для подписи пакета. Для этого нажмите кнопку **Обзор** и выберите сертификат, который вы хотите использовать для подписания пакета.
   
   > [!CAUTION]  
   > Не выбирайте параметр **включить шифрование пакетов**. на HoloLens устройствах этот параметр приводит к сбою подготовки.
1. Выберите **Далее**.
1. Укажите расположение выходных данных, где должен выполняться пакет подготовки при его сборке. По умолчанию конструктор конфигураций Windows использует в качестве расположения выходных данных папку проекта. Если вы хотите изменить расположение выходных данных, нажмите кнопку **Обзор**. По завершении нажмите кнопку **Далее**.
1. Выберите **Сборка** , чтобы начать сборку пакета. Сборка пакета подготовки выполняется быстро. На странице сборка отображаются сведения о проекте, а индикатор выполнения показывает состояние сборки.

### <a name="provisioning-package-step-3-ndash-apply-the-provisioning-package-to-hololens"></a><a id="ppapply"></a>Пакет подготовки, шаг 3, &ndash; Примените пакет подготовки к HoloLens

в статье "настройка HoloLens с помощью пакета подготовки" содержатся подробные инструкции по применению пакета подготовки в следующих случаях.

- вы можете сначала [применить пакет подготовки для HoloLens во время установки](hololens-provisioning.md#apply-a-provisioning-package-to-hololens-during-setup).

- вы также можете [применить пакет подготовки для HoloLens после установки](hololens-provisioning.md#applyremove-a-provisioning-package-to-hololens-after-setup).

## <a name="use-the-windows-device-portal-to-set-up-a-single-app-kiosk"></a>использование портала устройств Windows для настройки киоска с одним приложением

чтобы настроить полноэкранный режим с помощью Windows портала устройств, выполните следующие действия.

1. [настройте устройство HoloLens для использования портала Windows устройств](https://developer.microsoft.com/windows/mixed-reality/using_the_windows_device_portal#setting_up_hololens_to_use_windows_device_portal). Портал устройств — это веб-сервер на вашем устройстве HoloLens, к которому можно подключаться из веб-браузера на ПК.

    > [!CAUTION]
    > при настройке HoloLens для использования портала устройств необходимо включить режим разработчика на устройстве. режим разработчика на устройстве с Windows Holographic for Business позволяет загружать приложения. Однако этот параметр создает риск того, что пользователь может устанавливать приложения, которые не были сертифицированы Microsoft Store. Администраторы могут заблокировать возможность включения режима разработчика с помощью параметра **аппликатионманажемент/Алловдевелопер Unlock** в [CSP политики](/windows/client-management/mdm/policy-configuration-service-provider). [Подробнее о режиме разработчика.](/windows/uwp/get-started/enable-your-device-for-development#developer-mode)
    
1. на компьютере подключитесь к HoloLens с помощью [Wi-Fi](https://developer.microsoft.com/windows/mixed-reality/Using_the_Windows_Device_Portal#connecting_over_wi-fi) или [USB](https://developer.microsoft.com/windows/mixed-reality/Using_the_Windows_Device_Portal#connecting_over_usb).

1. Выполните одно из следующих действий.
   - если вы впервые подключаетесь к порталу устройств Windows, [создайте имя пользователя и пароль](https://developer.microsoft.com/windows/mixed-reality/Using_the_Windows_Device_Portal#creating_a_username_and_password) .
   - Введите имя пользователя и пароль, которые вы настроили ранее.

    > [!TIP]
    > Если вы видите в браузере ошибку сертификата, выполните [эти действия по устранению неполадок](https://developer.microsoft.com/windows/mixed-reality/Using_the_Windows_Device_Portal#security_certificate).

1. на портале устройства Windows выберите **режим киоска**.

1. Выберите **включить полноэкранный режим**, выберите приложение для запуска при запуске устройства и нажмите кнопку **сохранить**.

    ![Режим полного экрана](images/kiosk.png)
1. Перезапустите HoloLens. Если страница портала устройств по-прежнему открыта, в верхней части страницы можно нажать кнопку **перезапустить** .

> [!NOTE]
> Режим киоска можно задать с помощью REST API на портале устройств, выполнив POST в/АПИ/холографик/киоскмоде/Сеттингс с одним обязательным параметром строки запроса ("Киоскмодинаблед&quot; со значением &quot;true&quot; или &quot;false") и одним необязательным параметром ("Стартупапп" со значением имени пакета). Имейте в виду, что портал устройств предназначен только для разработчиков и не должен включаться на устройствах, не являющихся разработчиками. REST API может измениться в будущих обновлениях и выпусках.

## <a name="more-information"></a>Дополнительные сведения

### <a name="watch-how-to-configure-a-kiosk-by-using-a-provisioning-package"></a>Посмотрите, как настроить киоск с помощью пакета подготовки.  

> [!VIDEO https://www.microsoft.com/videoplayer/embed/fa125d0f-77e4-4f64-b03e-d634a4926884?autoplay=false]

### <a name="global-assigned-access--kiosk-mode"></a>Глобальный назначенный доступ — режим киоска
- Сокращение управления удостоверениями для киоска путем включения нового метода киоска, который применяет полноэкранный режим на уровне системы.

эта новая функция позволяет ит-администратору настроить устройство HoloLens 2 для многофункционального режима киоска приложений, которое применимо на уровне системы, не имеет сходства с какими-либо удостоверениями в системе и применяется ко всем, кто подписывается на устройство. дополнительные сведения об этой новой функции см. в документации по [HoloLens глобально назначенному доступу](hololens-global-assigned-access-kiosk.md) .

### <a name="automatic-launch-of-an-application-in-multiple-app-kiosk-mode"></a>Автоматический запуск приложения в полноэкранном режиме с несколькими приложениями 
- Поддержка автоматического запуска приложений, дальнейшее увеличение выбора пользовательского интерфейса и приложений, выбранных для работы в режиме киоска.

Применяется только к полноэкранному режиму, и только одно приложение может быть назначено для автоматического запуска с помощью выделенного атрибута ниже в конфигурации назначенного доступа. 

Приложение автоматически запускается при входе пользователя в систему. 

```xml
<AllowedApps>                     
      <!--TODO: Add AUMIDs of apps you want to be shown here, e.g. <App AppUserModelId="Microsoft.MicrosoftEdge_8wekyb3d8bbwe!MicrosoftEdge" rs5:AutoLaunch="true"/> --> 
</AllowedApps>
```


### <a name="kiosk-mode-behavior-changes-for-handling-of-failures"></a>Изменения режима киоска для обработки сбоев
При возникновении сбоев при применении режима киоска появляется следующее поведение:

- до Windows holographic, версия 20H2-HoloLens покажет все приложения в меню.
- Windows Holographic, версия 20H2. Если устройство имеет конфигурацию киоска, которая является сочетанием глобального назначенного доступа и назначенного члена группы AAD, при неудачном определении членства в группе AAD пользователь увидит меню "ничего не отображается в".

![Изображение режима киоска, который теперь выглядит в случае сбоя.](images/hololens-kiosk-failure-behavior.png )


- начиная с [Windows holographic, version 21H1](hololens-release-notes.md#windows-holographic-version-21h1), полноэкранный режим ищет глобальный назначенный доступ перед отображением пустого меню "пуск". Работа киоска будет восстановлена в глобальной конфигурации киоска (если она есть) в случае сбоев в режиме киоска группы AAD.

### <a name="cache-azure-ad-group-membership-for-offline-kiosk"></a>Кэширование членства в группах Azure AD для автономного киоска

- Более безопасный режим, исключая доступные приложения в случае сбоев в режиме киоска.
- Включенные автономные киоски для использования с группами Azure AD до 60 дней.

Эта политика определяет, сколько дней кэширование членства в группах Azure AD разрешено использовать для назначенных конфигураций доступа, нацеленных на группы Azure AD для пользователя, выполнившего вход. Если значение этого параметра политики больше 0, то в противном случае используется кэш.  

Имя: Аадграупмембершипкачевалидитиндайс значение URI:./вендор/мсфт/Полици/конфиг/микседреалити/аадграупмембершипкачевалидитиндайс

Min – 0 дней  
Макс. — 60 дней 

Действия по правильной работе с этой политикой: 
1. создайте профиль конфигурации устройства для киосков, предназначенных для групп Azure AD, и назначьте его для HoloLens устройств. 
1. создайте настраиваемую конфигурацию устройства на основе URI OMA, которая устанавливает значение этой политики в нужное число дней (> 0) и назначает его для HoloLens устройств. 
    1. Значение URI должно быть указано в текстовом поле OMA-URI как./вендор/мсфт/Полици/конфиг/микседреалити/аадграупмембершипкачевалидитиндайс
    1. Значение может находиться в диапазоне от минимального до максимального допустимого значения.
1. регистрация HoloLens устройств и проверка того, что обе конфигурации применяются к устройству. 
1. Разрешить вход пользователя Azure AD в случае доступности в Интернете. После подтверждения успешного входа пользователя в систему и членства в группе Azure AD будет создан кэш. 
1. теперь пользователь Azure AD 1 может перевести HoloLens в автономный режим и использовать его для полноэкранного режима, если значение политики разрешено в течение X дней. 
1. Шаги 4 и 5 могут повторяться для любого другого пользователя Azure AD N. ключевой момент здесь заключается в том, что любой пользователь Azure AD должен войти на устройство с помощью Интернета, по крайней мере, после этого можно определить, что он является членом группы Azure AD, на которую нацелена конфигурация киоска. 
 
> [!NOTE]
> До выполнения шага 4 для пользователя Azure AD будет возникать ошибка, описанная в "отключенных" средах. 


## <a name="xml-kiosk-code-samples-for-hololens"></a>Примеры кода для киосков XML для HoloLens

### <a name="multiple-app-kiosk-mode-targeting-an-azure-ad-group"></a>Режим киоска нескольких приложений предназначен для группы Azure AD. 
в этом киоске для пользователей в группе Azure AD будет включено киоск, включающий 3 приложения: Параметры, удаленный помощник и центр обратной связи. Чтобы изменить этот пример для немедленного использования, обязательно измените GUID, выделенный ниже, в соответствии с собственной группой Azure AD. 


:::code language="xml" source="samples/kiosk-sample-multi-aad-group.xml" highlight="20":::


### <a name="multiple-app-kiosk-mode-targeting-azure-ad-account"></a>Режим киоска для нескольких приложений, предназначенный для учетной записи Azure AD.
в этом киоске для одного пользователя будет включено киоск, включающий 3 приложения: Параметры, удаленный помощник и центр обратной связи. Чтобы изменить этот пример для немедленного использования, обязательно измените учетную запись, выделенную ниже, чтобы она соответствовала собственной учетной записи Azure AD. 


:::code language="xml" source="samples/kiosk-sample-multi-aad-account.xml" highlight="20":::

