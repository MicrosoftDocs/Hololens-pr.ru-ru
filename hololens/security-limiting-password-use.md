---
title: Ограничение использования паролей
description: ограничение использования паролей для holoLens
author: evmill
ms.author: v-evmill
ms.reviewer: tagran
ms.date: 6/30/2020
ms.topic: article
keywords: безопасность, holoLens, ограничение использования паролей, пароль, пароль holoLens, вход, войти, Windows Hello, Hello, диспетчер учетных записей Windows, вход в FIDO2, FIDO 2, WEBAUTHN, локальная учетная запись, безопасность holoLens
ms.prod: hololens
ms.sitesec: library
ms.localizationpriority: high
manager: yannisle
appliesto:
- HoloLens (1st gen)
- HoloLens 2
ms.openlocfilehash: d577bc23089650e47159a8a77004a984059b095e
ms.sourcegitcommit: 72ff3174b34d2acaf72547b7d981c66aef8fa82f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/10/2020
ms.locfileid: "11009517"
---
# Ограничение использования паролей

В большинстве компьютерных систем на сегодняшний день в качестве основы для обеспечения безопасности используются учетные данные пользователей, что делает их зависимыми от повторно используемых, создаваемых пользователями паролей. В результате пароли становятся наиболее распространенной причиной компрометации учетных записей и утечки данных. Например, пароли могут быть перехвачены при передаче или украдены с сервера (путем фишинга или атаки с распылением пароля) и скомпрометированы для доступа к учетной записи пользователя.

Для повышения безопасности и защиты учетных записей в HoloLens 2 предусмотрена возможность использовать для входа в устройства надежные, аппаратно-защищенные “беспарольные“ учетные данные (в том числе Windows Hello), которые обеспечивают удобный доступ к облачным службам Майкрософт. 

## Вход с другого устройства

HoloLens 2 предлагает возможности входа удаленного входа в устройства для рабочих учетных записей Azure Active Directory в ходе начальной настройки устройства и входа пользователя в систему, чтобы уменьшить необходимость ввода сложных паролей и сократить использование паролей в качестве учетных данных. Пользователям и организациям, которые проходят проверку подлинности с помощью смарт-карт, может быть затруднительно использовать такие учетные данные на таких устройствах, как HoloLens 2, и зачастую им приходится разрабатывать сложные системы и дорогостоящие процессы для решения этой проблемы. Для устранения этой проблемы в Azure AD предусмотрены два варианта беспарольного входа на HoloLens 2. 

Первый способ проверки подлинности базируется на новых возможностях приложения Microsoft Authenticator— проверке подлинности на основе ключей, что позволяет связать учетные данные пользователя с устройством. После выполнения такой привязки администратором на клиентском устройстве пользователь при настройке устройства HoloLens будет получать сообщение, в котором ему предлагается набрать номер в своем приложении. Затем этот номер надо сравнить с номером в приложении проверки подлинности, выбрать команду “Подтвердить“, указать ПИН-код или биометрическую информацию и завершить проверку подлинности, чтобы продолжить настройку HoloLens. Эта процедура более подробно рассматривается в описании [беспарольного входа](https://docs.microsoft.com/azure/active-directory/authentication/howto-authentication-passwordless-phone).

Второй способ— это процесс генерации кода на устройстве, интуитивно понятный пользователям и не требующий никакой дополнительной инфраструктуры.  В этом процессе удаленного входа используется другое надежное устройство, которое поддерживает принятый в организации механизм проверки подлинности; после его завершения обратно в HoloLens передаются токены для завершения входа или настройки устройства. Этот процесс состоит из следующих этапов.

  1.    Пользователь в ходе начальной настройки устройства или входа в OOBE получает ссылку "Войти с другого устройства" и переходит по ней. При этом начинается сеанс удаленного входа.
  2.    Затем для пользователя отображается страница опроса, содержащая короткий универсальный код ресурса (URI) ([https://microsoft.com/devicelogin](https://microsoft.com/devicelogin)), который указывает на конечную точку проверки подлинности устройства в службе токенов безопасности Azure AD (STS). Кроме того, пользователь получает одноразовый код, безопасно созданный в облаке и действующий 15 минут. Наряду с созданием кода служба Azure AD также создает зашифрованный сеанс по запросу на удаленный вход в предыдущем действии; при этом URI и код используются для утверждения удаленного запроса на вход. 
  3.    Затем пользователь переходит на URI с другого устройства и вводит код, отображенный на устройстве HoloLens 2. 
  4.    После того как пользователь введет код, Azure AD STS отображает страницу с указанием устройства пользователя HoloLens 2, на котором был инициирован запрос на удаленный вход и запрошено создание кода. Затем пользователю предлагается подтвердить операцию, чтобы исключить возможность фишинговых атак. 
  5.    Если пользователь решит продолжать вход в показанное “приложение“, Azure AD STS предложит пользователю ввести свои учетные данные. После успешной проверки подлинности Azure AD STS обновляет кэшированный удаленный сеанс как “утвержденный“ с кодом авторизации.
  6.    И, наконец, страница опроса на устройстве HoloLens 2 пользователя получает ответ "Авторизовано" от Azure AD и проверяет код пользователя, связанный с ним сохраненный код авторизации и создает токены OAuth, как требуется для завершения настройки устройства. Созданный токен проверки подлинности действителен в течение 1 часа, а срок действия токена обновления— 90 дней. 

Алгоритмы создания и шифрования кодов, используемые в этом процессе, совместимы с FIPS. Устройства HoloLens 2 используют доверенный платформенный модуль (TPM) для защиты ключей устройств и шифруют токены, созданные после проверки подлинности пользователя, аппаратно защищенными ключами. Дополнительно о безопасности токенов в HoloLens 2 можно прочитать в статье [Что такое основной токен обновления (PRT)](https://docs.microsoft.com/azure/active-directory/devices/concept-primary-refresh-token).

## Вход на устройство с помощью Windows Hello

[Windows Hello](https://docs.microsoft.com/windows/security/identity-protection/hello-for-business/hello-identity-verification) предлагает функции беспарольного входа, встроенные прямо в операционную систему и позволяющие пользователям входить на устройство, используя распознавание радужной оболочки или ПИН-код. ПИН-код всегда доступен в качестве учетных данных и обязателен при настройке устройства, тогда как распознавание радужной оболочки— необязательная процедура, которую можно пропустить. Пользователи могут входить на устройства HoloLens, используя свою личную учетную запись Майкрософт или [рабочую учетную запись Azure Active Directory *без* ввода пароля](https://docs.microsoft.com/azure/active-directory/authentication/concept-authentication-passwordless). Такие варианты предлагают пользователям быстрый и безопасный доступ ко всем возможностям Windows, приложениям, данным, веб-сайтам и службам. Здесь подробно описана стратегия Майкрософт в сфере беспарольного доступа.

При создании учетных данных Windows Hello устанавливаются доверительные отношения с поставщиком удостоверений и создается пара асимметричных ключей для проверки подлинности. Жест Windows Hello (такой как распознавание радужной оболочки или ПИН-код) обеспечивает высокий уровень энтропии для расшифровки закрытого ключа, возвращаемого микросхемой доверенного платформенного модуля (TPM). Затем этот закрытый ключ используется для подписи запросов, отправляемых на сервер проверки подлинности, и после успешной проверки подлинности пользователю предоставляется доступ к почте, изображениям и другим параметрам учетной записи. 

Дополнительные сведения см. на следующей инфографике.

  ![Вход с помощью Winows Hello](images/security-hello-sign-in.png)
  
Обратите внимание, что на приведенном выше рисунке "nonce" означает "number once"— случайное или псевдослучайное число. После создания биометрических учетных данных или ПИН-кода Windows Hello они никогда не покидают устройство, на котором были подготовлены. Даже если ПИН-код Windows Hello будет украден (например, путем фишинга), он [окажется бесполезным без физического устройства пользователя](https://docs.microsoft.com/windows/security/identity-protection/hello-for-business/hello-why-pin-is-better-than-password). 

Для дополнительного укрепления безопасности учетные данные Windows Hello защищены доверенным платформенным модулем (TPM), что делает их устойчивыми к взлому и дополняет средствами противодействия подбору паролей при неоднократном неверном вводе, а также средствами защиты от вредоносных программ. Подробнее об едином входе можно узнать в |этом [обзоре методов единого входа](https://docs.microsoft.com/azure/active-directory/manage-apps/what-is-single-sign-on).

При проверке подлинности с распознаванием радужной оболочки используется ПИН-код. Чтобы пользователь мог создать на устройстве новый ПИН-код (надежное средство проверки подлинности), он должен недавно пройти [многофакторную проверку подлинности (MFA)](https://docs.microsoft.com/azure/active-directory/authentication/concept-mfa-howitworks).

## Единый вход с помощью диспетчера учетных веб-записей 

Единый вход позволяет беспарольным пользователям входить на устройство, используя свою личную, рабочую или учебную учетную запись. Единый вход автоматически авторизует пользователя во всех интегрированных приложениях и службах через [API диспетчера учетных записей веб-служб](https://docs.microsoft.com/uwp/api/Windows.Security.Authentication.Web.Provider?view=winrt-19041).

Как только удостоверение будет добавлено через одно приложение, оно может, с согласия пользователя, стать доступным во всех приложениях и службах путем интеграции на уровне системы. Это значительно уменьшает количество операций входа и обеспечивает пользователю непрерывность работы с удостоверениями.

Дополнительные сведения о применении API диспетчера учетных веб-записей см. в статье [Реализация API диспетчера учетных веб-записей](https://docs.microsoft.com/windows/uwp/security/web-account-manager).

  ![Вход с помощью Winows Hello](images/security-api-img.png)
  
В случае пакетов приложений с особыми требованиями к проверке подлинности инфраструктура диспетчера учетных веб-записей (WAM) может расширяться, включая специальные поставщики удостоверений. Пользователи могут загрузить специальный поставщик удостоверений в формате приложения универсальной платформы Windows (UWP) из магазина Microsoft Store и использовать единый вход в других приложениях, интегрированных с этим поставщиком удостоверений. 

Дополнительные сведения о реализации специальных поставщиков удостоверений WAM см. в статье [Справочник по API специальных поставщиков удостоверений WAM](https://docs.microsoft.com/uwp/api/Windows.Security.Authentication.Web.Provider?view=winrt-19041).

## Вход с помощью Windows Hello и FIDO2 с WebAuthn

HoloLens 2 может использовать беспарольные учетные данные пользователей (например, Windows Hello или FIDO2) для безопасного входа в Интернете через Microsoft Edge и на веб-сайты, которые поддерживают WebAuthn. FIDO2 позволяет использовать учетные данные пользователей для проверки подлинности в веб-службах с помощью стандартных устройств.

> [!Note] 
> Спецификации [WebAuthn](https://www.w3.org/TR/webauthn/) и FIDO2 [CTAP2](https://fidoalliance.org/specs/fido-v2.0-ps-20190130/fido-client-to-authenticator-protocol-v2.0-ps-20190130.html) реализованы в виде служб. Подписанные метаданные, которые указывают WebAuthn и FIDO2, дают информацию— например, о том, присутствовал ли пользователь— и подтверждают проверку подлинности с помощью локального жеста.

Как и в Windows Hello, когда пользователь создает и регистрирует учетные данные FIDO2, устройство (HoloLens 2 или ключ безопасности FIDO2) генерирует закрытый и открытый ключи. Закрытый ключ безопасно хранится на устройстве, и его можно использовать только после того, как он будет разблокирован с помощью локального жеста (например, биометрии или ПИН-кода). При сохранении закрытого ключа открытый ключ отправляется в систему учетных записей Майкрософт в облаке, а затем регистрируется вместе с соответствующей учетной записью пользователя.

После входа в учетную запись MSA и AAD система отправляет сгенерированное число или переменную на устройство HoloLens 2 или FIDO2. HoloLens 2 или устройство подписывает идентификацию закрытым ключом. Подписанная идентификация и метаданные отправляются назад в систему учетных записей Майкрософт и подтверждаются открытым ключом.

Устройства Windows Hello и FIDO2 применяют учетные данные на основе устройства HoloLens, а именно встроенного защищенного анклава доверенного платформенного модуля. Анклав TPM сохраняет закрытый ключ и запрашивает биометрию или ПИН-код для его разблокировки. Аналогично, ключ безопасности FIDO2— это небольшое внешнее устройство со встроенным защищенным анклавом, в котором хранится закрытый ключ, и для его разблокирования требуется биометрия или ПИН-код.

Оба варианта обеспечивают двухфакторную проверку подлинности за одну операцию, требуя для успешного входа наличии зарегистрированного устройства и биометрии или ПИН-кода. Дополнительные сведения см. на следующей схеме строгой проверки подлинности с помощью ключа безопасности FIDO2.

  ![Изображение FIDO](images/security-fido2-whfb.png)

MSA и AAD входят в число первых проверяющих сторон для поддержки беспарольной проверки подлинности путем реализации WebAuthn. 

Дополнительно об использовании WebAuthn с приложениями и (или) пакетами SDK см. в статье [API WebAuthn для беспарольной проверки подлинности в Windows 10](https://docs.microsoft.com/windows/security/identity-protection/hello-for-business/webauthnapis).

## Локальные учетные записи

Одну локальную учетную запись можно настроить для развертываний в автономном режиме. Локальные учетные записи по умолчанию не задействованы и должны быть настроены во время подготовки устройства. Они должны использовать пароль при входе и не поддерживают альтернативные методы проверки подлинности (такие как [Windows Hello для бизнеса](https://docs.microsoft.com/windows/security/identity-protection/hello-for-business/hello-overview) или [Windows Hello](https://docs.microsoft.com/windows-hardware/design/device-experiences/windows-hello)). 

Дополнительно об учетных записях HoloLens читайте в статье [Удостоверение HoloLens](https://docs.microsoft.com/hololens/hololens-identity). 

ИТ-администраторы указывают, разрешено ли пользователю использовать учетную запись MSA для проверки подлинности подключений и сервисов, не относящихся к системе электронной почты, через [AllowMicrosoftAccountConnection](https://docs.microsoft.com/windows/client-management/mdm/policy-csp-accounts#accounts-allowmicrosoftaccountconnection). О политиках настройки паролей, политиках простоя и экрана блокировки см. в статье [Блокировка устройства](https://docs.microsoft.com/windows/client-management/mdm/policy-csp-devicelock). 
