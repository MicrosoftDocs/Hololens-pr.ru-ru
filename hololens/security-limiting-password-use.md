---
title: Ограничение использования паролей
description: ограничение использования паролей для HoloLens
author: evmill
ms.author: v-evmill
ms.reviewer: tagran
ms.date: 6/30/2020
ms.topic: article
keywords: безопасность, HoloLens, ограничение использования паролей, пароль, пароль HoloLens, войти, вход, Windows Hello, Hello, диспетчер учетных записей Windows, вход в FIDO2, FIDO 2, WEBAUTHN, локальная учетная запись, безопасность HoloLens
ms.prod: hololens
ms.sitesec: library
ms.localizationpriority: high
manager: yannisle
appliesto:
- HoloLens (1st gen)
- HoloLens 2
ms.openlocfilehash: 24cd9b81d0d99afaa0479787b846b423310c6739
ms.sourcegitcommit: e9f746aa41139859edc12fbc21f926c9461da4b3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2021
ms.locfileid: "126034715"
---
# <a name="limiting-password-use"></a>Ограничение использования паролей

В большинстве компьютерных систем на сегодняшний день в качестве основы для обеспечения безопасности используются учетные данные пользователей, что делает их зависимыми от повторно используемых, создаваемых пользователями паролей. В результате пароли становятся наиболее распространенной причиной компрометации учетных записей и утечки данных. Например, пароли могут быть перехвачены при передаче или украдены с сервера (путем фишинга или атаки с распылением пароля) и скомпрометированы для доступа к учетной записи пользователя.

Для повышения безопасности и защиты учетных записей в HoloLens 2 предусмотрена возможность использовать для входа в устройства надежные, аппаратно-защищенные "беспарольные" учетные данные (в том числе Windows Hello), которые обеспечивают удобный доступ к облачным службам Майкрософт.

## <a name="signing-in-from-another-device"></a>Вход с другого устройства

HoloLens 2 предлагает возможности удаленного входа в устройства для рабочих учетных записей Azure Active Directory в ходе начальной настройки устройства и входа пользователя в систему, чтобы уменьшить необходимость ввода сложных паролей и сократить использование паролей в качестве учетных данных. Пользователям и организациям, которые проходят проверку подлинности с помощью смарт-карт, может быть затруднительно использовать такие учетные данные на таких устройствах, как HoloLens 2, и зачастую им приходится разрабатывать сложные системы и дорогостоящие процессы для решения этой проблемы. Для устранения этой проблемы в Azure AD предусмотрены два варианта беспарольного входа на HoloLens 2.

Первый способ проверки подлинности базируется на новых возможностях приложения Microsoft Authenticator — проверке подлинности на основе ключей, что позволяет связать учетные данные пользователя с устройством. После выполнения такой привязки администратором на клиентском устройстве пользователь при настройке устройства HoloLens будет получать сообщение, в котором ему предлагается набрать номер в своем приложении. Затем этот номер надо сравнить с номером в приложении проверки подлинности, выбрать команду "Подтвердить", указать ПИН-код или биометрическую информацию и завершить проверку подлинности, чтобы продолжить настройку HoloLens. Более подробно этот процесс описан в статье [Вход без пароля](/azure/active-directory/authentication/howto-authentication-passwordless-phone).

Второй способ — это процесс генерации кода на устройстве, интуитивно понятный пользователям и не требующий никакой дополнительной инфраструктуры.  В этом процессе удаленного входа используется другое надежное устройство, которое поддерживает принятый в организации механизм проверки подлинности; после его завершения обратно в HoloLens передаются токены для завершения входа или настройки устройства. Этот процесс состоит из следующих этапов:

  1. Пользователь в ходе начальной настройки устройства или входа в OOBE получает ссылку "Войти с другого устройства" и переходит по ней. При этом начинается сеанс удаленного входа.
  1. Затем для пользователя отображается страница опроса, содержащая короткий универсальный код ресурса (URI) ([https://microsoft.com/devicelogin](https://microsoft.com/devicelogin)), который указывает на конечную точку проверки подлинности устройства в службе токенов безопасности Azure AD. Кроме того, пользователь получает одноразовый код, безопасно созданный в облаке и действующий в течение 15 минут. Наряду с созданием кода служба Azure AD также создает зашифрованный сеанс по запросу на удаленный вход в предыдущем действии; при этом URI и код используются для утверждения удаленного запроса на вход.
  1. Затем пользователь переходит по URI с другого устройства и вводит код, отображенный на устройстве HoloLens 2.
  1. После того как пользователь введет код, в службе токенов безопасности Azure AD отображается страница с указанием устройства пользователя HoloLens 2, на котором был инициирован запрос на удаленный вход и запрошено создание кода. Затем пользователю предлагается подтвердить операцию, чтобы исключить возможность фишинговых атак.
  1. Если пользователь решит продолжать вход в отображаемое "приложение", служба токенов безопасности Azure AD предложит пользователю указать свои учетные данные. После успешной проверки подлинности служба токенов безопасности Azure AD обновляет кэшированный удаленный сеанс как "утвержденный" с кодом авторизации.
  1. И, наконец, страница опроса на устройстве HoloLens 2 пользователя получает ответ "Авторизовано" от Azure AD и проверяет код пользователя, связанный с ним сохраненный код авторизации и создает токены OAuth, необходимые для завершения настройки устройства. Созданный токен проверки подлинности действителен в течение 1 часа, а срок действия токена обновления — 90 дней.

Алгоритмы создания и шифрования кодов, используемые в этом процессе, совместимы с FIPS. Устройства HoloLens 2 используют доверенный платформенный модуль (TPM) для защиты ключей устройств и шифруют токены, созданные после проверки подлинности пользователя, с помощью аппаратно защищенных ключей. Дополнительные сведения о безопасности токенов в HoloLens 2 см. в разделе [Что такое основной токен обновления (PRT)](/azure/active-directory/devices/concept-primary-refresh-token).

## <a name="device-sign-in-with-windows-hello"></a>Вход на устройство с помощью Windows Hello

[Windows Hello](/windows/security/identity-protection/hello-for-business/hello-identity-verification) предлагает функции беспарольного входа, встроенные прямо в операционную систему и позволяющие пользователям входить на устройство, используя распознавание радужной оболочки или ПИН-код. ПИН-код всегда доступен в качестве учетных данных и обязателен при настройке устройства, тогда как распознавание радужной оболочки — необязательная процедура, которую можно пропустить. Пользователи могут входить на устройства HoloLens, используя свою личную учетную запись Майкрософт или [рабочую учетную запись Azure Active Directory *без* ввода пароля](/azure/active-directory/authentication/concept-authentication-passwordless). Такие варианты предлагают пользователям быстрый и безопасный доступ ко всем возможностям Windows, приложениям, данным, веб-сайтам и службам. В этой статье подробно описана стратегия Майкрософт в отношении беспарольного доступа.

При создании учетных данных Windows Hello устанавливаются доверительные отношения с поставщиком удостоверений и создается пара асимметричных ключей для проверки подлинности. Жест Windows Hello (такой как распознавание радужной оболочки или ПИН-код) обеспечивает высокий уровень энтропии для расшифровки закрытого ключа, возвращаемого микросхемой доверенного платформенного модуля (TPM). Затем этот закрытый ключ используется для подписывания запросов, отправляемых на сервер проверки подлинности, и после успешной проверки подлинности пользователю предоставляется доступ к почте, изображениям и другим параметрам учетной записи.

Дополнительные сведения см. на следующей инфографике:

  ![Вход с помощью Windows Hello.](images/security-hello-sign-in.png)
  
Обратите внимание, что на приведенном выше рисунке "nonce" означает "number once" — случайное или псевдослучайное число. После создания биометрических учетных данных или ПИН-кода Windows Hello они никогда не покидают устройство, на котором были подготовлены. Даже если ПИН-код Windows Hello будет украден (например, путем фишинга), он [бесполезен без физического устройства пользователя](/windows/security/identity-protection/hello-for-business/hello-why-pin-is-better-than-password).

Для дополнительного повышения безопасности учетные данные Windows Hello защищены доверенным платформенным модулем (TPM). Это делает их устойчивыми к взлому и защищает от подбора паролей при неоднократном неверном вводе пароля, а также от вредоносных программ, чтобы предотвратить утечку пароля. Дополнительные сведения о едином входе (SSO) см. в этом [обзоре методов единого входа](/azure/active-directory/manage-apps/what-is-single-sign-on).

Если проверка подлинности с распознаванием радужной оболочки не пройдена, используется ПИН-код. Чтобы пользователь мог создать на устройстве новый ПИН-код (надежное средство проверки подлинности), он должен предварительно пройти [многофакторную проверку подлинности](/azure/active-directory/authentication/concept-mfa-howitworks).

## <a name="single-sign-on-with-web-account-manager"></a>Единый вход с помощью диспетчера учетных веб-записей

Единый вход позволяет беспарольным пользователям входить на устройство, используя свою личную, рабочую или учебную учетную запись. Единый вход автоматически авторизует пользователя во всех интегрированных приложениях и службах с помощью [API диспетчера учетных веб-записей](/uwp/api/Windows.Security.Authentication.Web.Provider?view=winrt-19041&preserve-view=true).

Как только удостоверение будет добавлено через одно приложение, оно может, с согласия пользователя, стать доступным во всех приложениях и службах путем интеграции на уровне системы. Это значительно уменьшает количество операций входа и обеспечивает простой процесс работы с удостоверением для пользователя.

Дополнительные сведения о реализации API диспетчера учетных веб-записей см. в разделе [Реализация API диспетчера учетных веб-записей](/windows/uwp/security/web-account-manager).

  ![API безопасности.](images/security-api-img.png)
  
Для пакетов приложений с особыми требованиями к проверке подлинности инфраструктура диспетчера учетных веб-записей (WAM) может расширяться, включая специальных поставщиков удостоверений. Пользователи могут загрузить специальный поставщик удостоверений в формате приложения универсальной платформы Windows (UWP) из магазина Microsoft Store и использовать единый вход в других приложениях, интегрированных с этим поставщиком удостоверений.

Дополнительные сведения о реализации настраиваемых поставщиков удостоверений WAM см. в статье [Справочник по API настраиваемого поставщика удостоверений WAM](/uwp/api/Windows.Security.Authentication.Web.Provider?view=winrt-19041&preserve-view=true).

## <a name="windows-hello-and-fido2-sign-in-with-webauthn"></a>Вход с помощью Windows Hello и FIDO2 с WebAuthn

HoloLens 2 может использовать беспарольные учетные данные пользователей (например, Windows Hello или FIDO2) для безопасного входа в Интернете через Microsoft Edge на веб-сайты, которые поддерживают WebAuthn. FIDO2 позволяет использовать учетные данные пользователей для проверки подлинности в веб-службах на устройствах, соответствующих стандартам.

> [!Note]
> Спецификации [WebAuthn](https://www.w3.org/TR/webauthn/) и FIDO2 [CTAP2](https://fidoalliance.org/specs/fido-v2.0-ps-20190130/fido-client-to-authenticator-protocol-v2.0-ps-20190130.html) реализованы в службах. Подписанные метаданные, указанные WebAuthn и FIDO2, предоставляют информацию — например, о том, присутствовал ли пользователь, — и подтверждают проверку подлинности с помощью локального жеста.

Как и в Windows Hello, когда пользователь создает и регистрирует учетные данные FIDO2, устройство (HoloLens 2 или ключ безопасности FIDO2) генерирует закрытый и открытый ключи. Закрытый ключ безопасно хранится на устройстве, и его можно использовать только после того, как он будет разблокирован с помощью локального жеста (например, биометрии или ПИН-кода). При сохранении закрытого ключа открытый ключ отправляется в систему учетных записей Майкрософт в облаке, а затем регистрируется вместе с соответствующей учетной записью пользователя.

После входа с помощью учетной записи MSA и Azure AD система отправляет созданный номер или переменную данных на устройство HoloLens 2 или FIDO2. HoloLens 2 или устройство подписывает идентификацию закрытым ключом. Подписанная идентификация и метаданные отправляются назад в систему учетных записей Майкрософт и подтверждаются открытым ключом.

Устройства Windows Hello и FIDO2 применяют учетные данные на основе устройства HoloLens, а именно встроенного защищенного анклава доверенного платформенного модуля (TPM). Анклав TPM сохраняет закрытый ключ и запрашивает биометрию или ПИН-код для его разблокировки. Аналогично, ключ безопасности FIDO2 — это небольшое внешнее устройство со встроенным защищенным анклавом, в котором хранится закрытый ключ, и для его разблокирования требуется биометрия или ПИН-код.

Оба варианта обеспечивают двухфакторную проверку подлинности за одну операцию, требуя наличия зарегистрированного устройства и биометрии или ПИН-кода для успешного входа. Дополнительные сведения см. на следующей схеме процесса строгой проверки подлинности с помощью ключа безопасности FIDO2.

### <a name="strong-authentication-with-fido2-security-key"></a>Строгая проверка подлинности с помощью ключа безопасности FIDO2

  ![Изображение FIDO.](images/security-fido2-whfb-smaller.png)

1. Пользователь вставляет ключ безопасности FIDO2 в HoloLens 2
1. Windows обнаруживает ключ безопасности FIDO2
1. HoloLens отправляет запрос на проверку подлинности
1. Azure AD отправляет обратно nonce
1. Пользователь выполняет жест для разблокировки хранилищ закрытых ключей в защищенном анклаве ключа безопасности
1. Ключ безопасности FIDO2 подписывает nonce с помощью закрытого ключа
1. Запрос маркера PRT с подписанным nonce отправляется в Azure AD
1. Azure AD проверяет ключ FIDO
1. Azure AD возвращает PRT и TGT для обеспечения доступа к ресурсам

MSA и Azure AD относятся к проверяющим сторонам, которые первыми поддержали проверку подлинности без пароля путем реализации WebAuthn.

Дополнительные сведения об использовании WebAuthn с приложениями и (или) пакетами SDK см. в подразделах [API-интерфейсы WebAuthn для проверки подлинности без пароля на Windows 10](/windows/security/identity-protection/hello-for-business/webauthnapis).

HoloLens 2 поддерживает устройства безопасности FIDO2, удовлетворяющие требованиям, перечисленным в разделе [Беспарольный вход Azure Active Directory — ключи безопасности FIDO2](/azure/active-directory/authentication/concept-authentication-passwordless#fido2-security-keys).

## <a name="local-accounts"></a>Локальные учетные записи

Одну локальную учетную запись можно настроить для развертываний в автономном режиме. Локальные учетные записи по умолчанию не включены и должны быть настроены во время подготовки устройства. Для них должен использоваться вход с помощью пароля, и они не поддерживают альтернативные методы проверки подлинности (такие как [Windows Hello для бизнеса](/windows/security/identity-protection/hello-for-business/hello-overview) или [Windows Hello](/windows-hardware/design/device-experiences/windows-hello)).

Дополнительные сведения об учетных записях пользователей HoloLens см. в разделе [Удостоверение HoloLens](hololens-identity.md).

ИТ-администраторы указывают, разрешено ли пользователю использовать учетную запись MSA для проверки подлинности подключений и для служб, не связанных с электронной почтой, с помощью [AllowMicrosoftAccountConnection](/windows/client-management/mdm/policy-csp-accounts#accounts-allowmicrosoftaccountconnection). Сведения о политиках настройки паролей, политиках простоя и политиках экрана блокировки см. в разделе [Блокировка устройства](/windows/client-management/mdm/policy-csp-devicelock).
